import{g as D,j as S,e as T,p as k,c as v,o as c,w as h,A as d,x as _,z as f,r as b,u as E,P,K as e,s as a,L as U,E as i,y as I,D as x,a7 as C,aa as $,am as A,b_ as z,b$ as B,c0 as L}from"./DhuP7xi2.js";import{_ as j}from"./DlAUqK2U.js";const M={slots:{root:"rounded-lg",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},q={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(t){const o=t,l=D(),u=S(),n=T(()=>{var s;return k({extend:k(M),...((s=u.ui)==null?void 0:s.card)||{}})({variant:o.variant})});return(s,r)=>{var p;return c(),v(E(P),{as:t.as,class:f(n.value.root({class:[(p=o.ui)==null?void 0:p.root,o.class]}))},{default:h(()=>{var m,g,y;return[l.header?(c(),d("div",{key:0,class:f(n.value.header({class:(m=o.ui)==null?void 0:m.header}))},[b(s.$slots,"header")],2)):_("",!0),l.default?(c(),d("div",{key:1,class:f(n.value.body({class:(g=o.ui)==null?void 0:g.body}))},[b(s.$slots,"default")],2)):_("",!0),l.footer?(c(),d("div",{key:2,class:f(n.value.footer({class:(y=o.ui)==null?void 0:y.footer}))},[b(s.$slots,"footer")],2)):_("",!0)]}),_:3},8,["as","class"])}}},w=window.setInterval,H={name:"PredictionComponent",data(){return{prediction:null,loading:!0,error:!1,currentTime:new Date,countdownInterval:null}},computed:{isPredictionTime(){const o=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})).getHours();return o>=20||o<8},predictionData(){return this.prediction?this.prediction:{market_score:0}},hasStopLoss(){return this.prediction&&(this.prediction.long_stoploss||this.prediction.short_stoploss)},hasEvent(){return this.prediction&&this.prediction.events&&this.prediction.events!=="none"&&Math.abs(this.predictionData.market_score||0)>=.15},shouldShowPrediction(){return!this.prediction||!this.predictionData.market_score||this.hasEvent?!1:Math.abs(this.predictionData.market_score)>=.15}},mounted(){this.fetchPrediction(),this.timeInterval=w(()=>{this.currentTime=new Date},6e4),this.countdownInterval=w(()=>{this.currentTime=new Date},1e3)},beforeUnmount(){this.timeInterval&&clearInterval(this.timeInterval),this.countdownInterval&&clearInterval(this.countdownInterval)},methods:{async fetchPrediction(){this.loading=!0,this.error=!1;try{const t=A(),o=t.public.strapiApiUrl||"https://api.dashpull.com",l=t.public.strapiApiToken,u=new Date().toISOString().split("T")[0],n=`${o}/api/human-predicts-statistics`,s={"Content-Type":"application/json"};l&&(s.Authorization=`Bearer ${l}`);const r=await $fetch(n,{method:"GET",headers:s});if(r&&r.predictions&&r.predictions.length>0){const p=r.predictions.find(m=>m.day===u);this.prediction=p||null}else this.prediction=null}catch(t){console.error("Failed to fetch prediction:",t),this.error=!0}finally{this.loading=!1}},formatDate(t){return t?new Date(t).toLocaleDateString(this.$i18n.locale,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},formatTimeUntilPrediction(){const t=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),o=t.getHours(),l=t.getMinutes(),u=t.getSeconds();if(o<20){const n=19-o,s=59-l,r=60-u;return this.$i18n.locale==="zh"?`${n}时${s}分${r}秒`:`${n}h ${s}m ${r}s`}return""},translateEvent(t){return this.$t(`predictions.events.${t}`,t)},goToPredictionHistory(){const t=$();this.$router.push(t("/prediction-history"))}}},V={key:0,class:"flex items-center justify-center"},N={class:"flex items-center space-x-3"},O={class:"text-lg font-medium text-gray-600 dark:text-gray-300"},F={key:1,class:"flex items-center justify-between"},Z={class:"flex items-center space-x-3"},G={class:"text-lg font-medium text-red-600 dark:text-red-400"},R={key:2,class:"flex items-center justify-center"},J={class:"flex items-center justify-between w-full max-w-5xl"},K={class:"flex items-center space-x-3"},Q={class:"w-14 h-14 bg-primary/20 rounded-full flex items-center justify-center"},W={class:"text-xl font-bold text-gray-900 dark:text-white"},X={class:"text-base text-gray-500 dark:text-gray-400"},Y={class:"flex items-center"},ee={class:"bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border-2 border-amber-300 dark:border-amber-700 rounded-lg px-6 py-2 shadow-lg"},te={class:"text-center"},se={class:"text-xs font-medium text-amber-700 dark:text-amber-300 mb-1"},ne={class:"text-2xl font-black text-amber-900 dark:text-amber-100 font-mono tracking-wider"},oe={key:3,class:"flex items-center justify-center"},re={class:"flex items-center justify-between w-full max-w-6xl"},ie={class:"flex items-center space-x-4"},ae={class:"flex items-center space-x-3"},ce={class:"relative"},de={class:"text-base font-medium text-gray-600 dark:text-gray-300"},le={key:0,class:"flex items-center space-x-3 bg-blue-50 dark:bg-blue-950/50 border-2 border-blue-200 dark:border-blue-800 rounded-lg px-4 py-1 shadow-lg"},ue={class:"text-base font-bold text-blue-800 dark:text-blue-200"},me={class:"text-2xl font-black text-blue-900 dark:text-blue-100"},he={class:"text-right"},_e={class:"flex items-center justify-end space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-1"},pe={key:0,class:"flex space-x-1 justify-end"},fe={key:4,class:"flex items-center justify-center"},ge={class:"flex items-center justify-between w-full max-w-5xl"},xe={class:"flex items-center space-x-4"},ve={class:"flex items-center space-x-3"},be={class:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},ye={class:"text-xl font-bold text-gray-700 dark:text-gray-300"},ke={class:"text-base text-gray-500 dark:text-gray-400"},we={class:"flex items-center space-x-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-lg px-4 py-1 shadow-lg"},je={class:"text-base font-bold text-gray-600 dark:text-gray-300"},De={class:"text-2xl font-black text-gray-900 dark:text-white"},Se={key:5,class:"flex items-center justify-center"},Te={class:"flex items-center space-x-3"},Ee={class:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Pe={class:"text-lg font-medium text-gray-600 dark:text-gray-300"};function Ue(t,o,l,u,n,s){const r=U,p=I,m=C,g=q;return c(),v(g,{class:"prediction-banner bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-950 border-2 border-blue-200/30 dark:border-blue-800/30"},{default:h(()=>[n.loading?(c(),d("div",V,[e("div",N,[a(r,{name:"i-heroicons-arrow-path",class:"h-5 w-5 text-primary animate-spin"}),e("span",O,i(t.$t("prediction_component.loading")),1)])])):n.error?(c(),d("div",F,[e("div",Z,[a(r,{name:"i-heroicons-exclamation-triangle",class:"h-6 w-6 text-red-500"}),e("p",G,i(t.$t("prediction_component.error")),1)]),a(p,{onClick:s.fetchPrediction,color:"primary",size:"sm",loading:n.loading},{leading:h(()=>[a(r,{name:"i-heroicons-arrow-path"})]),default:h(()=>[x(" "+i(t.$t("common.refresh")),1)]),_:1},8,["onClick","loading"])])):s.isPredictionTime?n.prediction&&(s.shouldShowPrediction||s.hasEvent)?(c(),d("div",oe,[e("div",re,[e("div",ie,[e("div",ae,[e("div",ce,[e("div",{class:f(["flex items-center justify-center w-14 h-14 rounded-full text-white shadow-lg",s.hasEvent?"bg-gradient-to-br from-orange-400 to-orange-600":n.prediction.side==="long"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-red-400 to-red-600"])},[a(r,{name:s.hasEvent?"i-heroicons-exclamation-triangle":n.prediction.side==="long"?"i-heroicons-arrow-trending-up":"i-heroicons-arrow-trending-down",class:"h-7 w-7"},null,8,["name"])],2),e("div",{class:f(["absolute inset-0 rounded-full animate-ping opacity-20",s.hasEvent?"bg-orange-400":n.prediction.side==="long"?"bg-green-400":"bg-red-400"])},null,2)]),e("div",null,[a(m,{color:s.hasEvent?"orange":n.prediction.side==="long"?"green":"red",variant:"soft",size:"lg",class:"text-lg font-bold px-4 py-1 mb-1"},{default:h(()=>[x(i(s.hasEvent?s.translateEvent(n.prediction.events):n.prediction.side==="long"?t.$t("prediction_component.side_long"):t.$t("prediction_component.side_short")),1)]),_:1},8,["color"]),e("p",de,i(s.hasEvent?t.$t("predictions.event"):t.$t("prediction_component.current_prediction")),1)])]),s.hasEvent?_("",!0):(c(),d("div",le,[a(r,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-blue-600"}),e("span",ue,i(t.$t("prediction_component.market_score")),1),e("span",me,i(s.predictionData.market_score),1)]))]),e("div",he,[e("div",_e,[a(r,{name:"i-heroicons-clock",class:"h-5 w-5"}),e("span",null,i(s.formatDate(n.prediction.day)),1)]),s.hasStopLoss&&!s.hasEvent?(c(),d("div",pe,[n.prediction.long_stoploss?(c(),v(m,{key:0,color:"green",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:h(()=>[x(" 多头止损: "+i(n.prediction.long_stoploss),1)]),_:1})):_("",!0),n.prediction.short_stoploss?(c(),v(m,{key:1,color:"red",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:h(()=>[x(" 空头止损: "+i(n.prediction.short_stoploss),1)]),_:1})):_("",!0)])):_("",!0)])])])):n.prediction&&!s.shouldShowPrediction&&!s.hasEvent?(c(),d("div",fe,[e("div",ge,[e("div",xe,[e("div",ve,[e("div",be,[a(r,{name:"i-heroicons-minus-circle",class:"h-7 w-7 text-gray-400"})]),e("div",null,[e("h3",ye,i(t.$t("prediction_component.no_suggestion")),1),e("p",ke,i(t.$t("prediction_component.market_score_too_low")),1)])]),e("div",we,[a(r,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-gray-500"}),e("span",je,i(t.$t("prediction_component.market_score")),1),e("span",De,i(s.predictionData.market_score),1)])]),o[0]||(o[0]=e("div",null,null,-1))])])):(c(),d("div",Se,[e("div",Te,[e("div",Ee,[a(r,{name:"i-heroicons-document-magnifying-glass",class:"h-5 w-5 text-gray-400"})]),e("p",Pe,i(t.$t("common.no_data")),1)])])):(c(),d("div",R,[e("div",J,[e("div",K,[e("div",Q,[a(r,{name:"i-heroicons-clock",class:"h-7 w-7 text-primary"})]),e("div",null,[e("h3",W,i(t.$t("prediction_component.no_prediction_yet")),1),e("p",X,i(t.$t("prediction_component.waiting_for_prediction")),1)])]),e("div",Y,[e("div",ee,[e("div",te,[e("p",se,i(t.$t("prediction_component.countdown_label")),1),e("div",ne,i(s.formatTimeUntilPrediction()),1)])])])])]))]),_:1})}const Ie=Object.assign(j(H,[["render",Ue],["__scopeId","data-v-3568a833"]]),{__name:"MarketOverview"}),Ce={};function $e(t,o){const l=z,u=Ie,n=B,s=L;return c(),d("div",null,[a(l),a(u),a(n,null,{default:h(()=>[b(t.$slots,"default")]),_:3}),a(s)])}const Be=j(Ce,[["render",$e]]);export{Be as default};
