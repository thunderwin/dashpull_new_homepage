import{D as K,E as O,F as Q,L as W,G as X,H as Y,J as Z,K as tt,e as et,j as at,C as st,M as ot,N as nt,O as rt,i as it}from"./DS6f-JBG.js";import{_ as ct,a as lt,b as dt}from"./DWLytAM9.js";import{_ as _t}from"./CBqU85-x.js";import{ao as ut,W as h,a3 as m,D as s,Y as r,X as i,L as o,am as c,x as p,J as mt,an as pt,af as gt,Q as S,ag as _,ap as ht}from"./B_AaASQX.js";import"./C2bHYaEW.js";const ft={class:"text-(--ui-text-muted)"},xt={class:"flex flex-wrap items-center gap-3 mt-4"},yt={key:2,class:"grid gap-8 sm:grid-cols-2"},vt={key:0,class:"group"},kt={class:"min-w-0"},bt={class:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate"},wt={class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mt-1"},Pt={key:1},$t={key:2,class:"group"},Ut={class:"min-w-0 text-right"},Ct={class:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate"},Bt={class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mt-1"},It={__name:"[slug]",async setup(Dt){var b,w,P,$;let g,x;const{locale:f}=K(),z=O(),A=Q(),I=z.params.slug,{data:n}=([g,x]=ut(()=>Y(`posts-${f.value}`,()=>tt("posts").where("locale","=",f.value).all())),g=await g,x(),g),e=(b=n.value)==null?void 0:b.find(t=>t.path.includes(I));if(!e)throw W({statusCode:404,statusMessage:"Post not found",fatal:!0});const y=t=>{if(!t)return"#";const u=t.replace(/^\/(en|zh|zh-Hant)/,"");return f.value==="en"?u:A(u)},d=((w=n.value)==null?void 0:w.findIndex(t=>t.path===e.path))||0,a=[];if(d>0&&n.value&&n.value[d-1]){const t=n.value[d-1];a.push({...t,_path:y(t.path),title:t.title,description:t.description})}else a.push(null);if(d<(((P=n.value)==null?void 0:P.length)||0)-1&&n.value&&n.value[d+1]){const t=n.value[d+1];a.push({...t,_path:y(t.path),title:t.title,description:t.description})}else a.push(null);const v=e.title,k=e.description;return X({title:v,ogTitle:v,description:k,ogDescription:k}),($=e.image)!=null&&$.src,(t,u)=>{const V=st,E=at,H=et,M=ct,T=lt,F=nt,U=it,C=rt,J=_t,R=dt,j=ot,q=Z;return s(e)?(i(),h(q,{key:0},{default:r(()=>{var B,D,L,N;return[o(M,{title:s(e).title,description:s(e).description},{headline:r(()=>[o(V,S(s(e).badge,{variant:"subtle"}),null,16),u[0]||(u[0]=c("span",{class:"text-(--ui-text-muted)"},"Â·",-1)),c("time",ft,_(new Date(s(e).date).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"})),1)]),default:r(()=>[c("div",xt,[(i(!0),p(mt,null,pt(s(e).authors,(l,G)=>(i(),h(H,{key:G,to:l.to,color:"neutral",variant:"subtle",target:"_blank",size:"sm"},{default:r(()=>[o(E,S({ref_for:!0},l.avatar,{alt:"Author avatar",size:"2xs"}),null,16),gt(" "+_(l.name),1)]),_:2},1032,["to"]))),128))])]),_:1},8,["title","description"]),o(j,null,ht({default:r(()=>[o(J,null,{default:r(()=>[s(e)?(i(),h(T,{key:0,value:s(e)},null,8,["value"])):m("",!0),a.some(l=>l!==null)?(i(),h(F,{key:1})):m("",!0),a.some(l=>l!==null)?(i(),p("div",yt,[a[0]?(i(),p("div",vt,[o(C,{to:a[0]._path,class:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors"},{default:r(()=>[o(U,{name:"i-lucide-arrow-left",class:"w-4 h-4 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400 transition-colors flex-shrink-0"}),c("div",kt,[c("div",bt,_(a[0].title),1),c("div",wt,_(a[0].description),1)])]),_:1},8,["to"])])):(i(),p("div",Pt)),a[1]?(i(),p("div",$t,[o(C,{to:a[1]._path,class:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors"},{default:r(()=>[c("div",Ut,[c("div",Ct,_(a[1].title),1),c("div",Bt,_(a[1].description),1)]),o(U,{name:"i-lucide-arrow-right",class:"w-4 h-4 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-400 transition-colors flex-shrink-0"})]),_:1},8,["to"])])):m("",!0)])):m("",!0)]),_:1})]),_:2},[(N=(L=(D=(B=s(e))==null?void 0:B.body)==null?void 0:D.toc)==null?void 0:L.links)!=null&&N.length?{name:"right",fn:r(()=>[o(R,{links:s(e).body.toc.links},null,8,["links"])]),key:"0"}:void 0]),1024)]}),_:1})):m("",!0)}}};export{It as default};
