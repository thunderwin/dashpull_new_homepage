import{a8 as J,a9 as O,aa as Q,ab as W,ag as X,ac as Y,c as g,x as m,u as a,w as r,ad as Z,ae as tt,af as et,o as c,s as o,K as i,A as p,F as st,B as at,y as ot,D as nt,M as rt,m as N,E as u,a7 as ct,ah as it,v as lt,ai as _t,aj as ut,L as dt}from"./BKgRdRmC.js";import{_ as mt,a as pt,b as ht}from"./Bp2vfx53.js";import{_ as gt}from"./BkoFOpLB.js";import"./C2bHYaEW.js";const ft={class:"text-(--ui-text-muted)"},vt={class:"flex flex-wrap items-center gap-3 mt-4"},xt={key:2,class:"grid gap-8 sm:grid-cols-2"},yt={key:0,class:"group"},kt={class:"min-w-0"},bt={class:"text-sm font-medium text-gray-900 truncate"},wt={class:"text-sm text-gray-500 line-clamp-2 mt-1"},Pt={key:1},$t={key:2,class:"group"},Ut={class:"min-w-0 text-right"},Bt={class:"text-sm font-medium text-gray-900 truncate"},Ct={class:"text-sm text-gray-500 line-clamp-2 mt-1"},zt={__name:"[slug]",async setup(Dt){var b,w,P,$;let h,v;const{locale:f}=J(),S=O(),z=Q(),I=S.params.slug,{data:n}=([h,v]=W(()=>Z(`posts-${f.value}`,()=>et("posts").where("locale","=",f.value).all())),h=await h,v(),h),e=(b=n.value)==null?void 0:b.find(t=>t.path.includes(I));if(!e)throw X({statusCode:404,statusMessage:"Post not found",fatal:!0});const x=t=>{if(!t)return"#";const d=t.replace(/^\/(en|zh|zh-Hant)/,"");return f.value==="en"?d:z(d)},_=((w=n.value)==null?void 0:w.findIndex(t=>t.path===e.path))||0,s=[];if(_>0&&n.value&&n.value[_-1]){const t=n.value[_-1];s.push({...t,_path:x(t.path),title:t.title,description:t.description})}else s.push(null);if(_<(((P=n.value)==null?void 0:P.length)||0)-1&&n.value&&n.value[_+1]){const t=n.value[_+1];s.push({...t,_path:x(t.path),title:t.title,description:t.description})}else s.push(null);const y=e.title,k=e.description;return Y({title:y,ogTitle:y,description:k,ogDescription:k}),($=e.image)!=null&&$.src,(t,d)=>{const V=ct,E=rt,M=ot,T=mt,F=pt,H=_t,U=dt,B=ut,R=gt,j=ht,q=it,K=tt;return a(e)?(c(),g(K,{key:0},{default:r(()=>{var C,D,A,L;return[o(T,{title:a(e).title,description:a(e).description},{headline:r(()=>[o(V,N(a(e).badge,{variant:"subtle"}),null,16),d[0]||(d[0]=i("span",{class:"text-(--ui-text-muted)"},"Â·",-1)),i("time",ft,u(new Date(a(e).date).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"})),1)]),default:r(()=>[i("div",vt,[(c(!0),p(st,null,at(a(e).authors,(l,G)=>(c(),g(M,{key:G,to:l.to,color:"neutral",variant:"subtle",target:"_blank",size:"sm"},{default:r(()=>[o(E,N({ref_for:!0},l.avatar,{alt:"Author avatar",size:"2xs"}),null,16),nt(" "+u(l.name),1)]),_:2},1032,["to"]))),128))])]),_:1},8,["title","description"]),o(q,null,lt({default:r(()=>[o(R,null,{default:r(()=>[a(e)?(c(),g(F,{key:0,value:a(e)},null,8,["value"])):m("",!0),s.some(l=>l!==null)?(c(),g(H,{key:1})):m("",!0),s.some(l=>l!==null)?(c(),p("div",xt,[s[0]?(c(),p("div",yt,[o(B,{to:s[0]._path,class:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors"},{default:r(()=>[o(U,{name:"i-lucide-arrow-left",class:"w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-colors flex-shrink-0"}),i("div",kt,[i("div",bt,u(s[0].title),1),i("div",wt,u(s[0].description),1)])]),_:1},8,["to"])])):(c(),p("div",Pt)),s[1]?(c(),p("div",$t,[o(B,{to:s[1]._path,class:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors"},{default:r(()=>[i("div",Ut,[i("div",Bt,u(s[1].title),1),i("div",Ct,u(s[1].description),1)]),o(U,{name:"i-lucide-arrow-right",class:"w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-colors flex-shrink-0"})]),_:1},8,["to"])])):m("",!0)])):m("",!0)]),_:1})]),_:2},[(L=(A=(D=(C=a(e))==null?void 0:C.body)==null?void 0:D.toc)==null?void 0:A.links)!=null&&L.length?{name:"right",fn:r(()=>[o(j,{links:a(e).body.toc.links},null,8,["links"])]),key:"0"}:void 0]),1024)]}),_:1})):m("",!0)}}};export{zt as default};
