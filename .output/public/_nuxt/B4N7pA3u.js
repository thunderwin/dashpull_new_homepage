import{g as $,j as S,e as D,p as k,c as b,o as c,w as m,A as l,x as f,z as h,r as y,u as P,P as T,K as e,s as i,L as U,E as r,y as I,D as g,a7 as C,aa as z,am as A,b_ as L,b$ as M,c0 as q}from"./CbZUBoSJ.js";import{_ as j}from"./DlAUqK2U.js";const B={slots:{root:"rounded-lg",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},H={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(t){const n=t,d=$(),_=S(),s=D(()=>{var o;return k({extend:k(B),...((o=_.ui)==null?void 0:o.card)||{}})({variant:n.variant})});return(o,a)=>{var u;return c(),b(P(T),{as:t.as,class:h(s.value.root({class:[(u=n.ui)==null?void 0:u.root,n.class]}))},{default:m(()=>{var p,x,v;return[d.header?(c(),l("div",{key:0,class:h(s.value.header({class:(p=n.ui)==null?void 0:p.header}))},[y(o.$slots,"header")],2)):f("",!0),d.default?(c(),l("div",{key:1,class:h(s.value.body({class:(x=n.ui)==null?void 0:x.body}))},[y(o.$slots,"default")],2)):f("",!0),d.footer?(c(),l("div",{key:2,class:h(s.value.footer({class:(v=n.ui)==null?void 0:v.footer}))},[y(o.$slots,"footer")],2)):f("",!0)]}),_:3},8,["as","class"])}}},w=window.setInterval,V={name:"PredictionComponent",data(){return{prediction:null,loading:!0,error:!1,currentTime:new Date,countdownInterval:null}},computed:{isPredictionTime(){const n=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})).getHours();return n>=20||n<8},predictionData(){return this.prediction?this.prediction:{market_score:0}},hasStopLoss(){return this.prediction&&(this.prediction.long_stoploss||this.prediction.short_stoploss)},shouldShowPrediction(){return!this.prediction||!this.predictionData.market_score?!1:Math.abs(this.predictionData.market_score)>=.15}},mounted(){this.fetchPrediction(),this.timeInterval=w(()=>{this.currentTime=new Date},6e4),this.countdownInterval=w(()=>{this.currentTime=new Date},1e3)},beforeUnmount(){this.timeInterval&&clearInterval(this.timeInterval),this.countdownInterval&&clearInterval(this.countdownInterval)},methods:{async fetchPrediction(){this.loading=!0,this.error=!1;try{const t=A(),n=t.public.strapiApiUrl||"https://api.dashpull.com",d=t.public.strapiApiToken,_=new Date().toISOString().split("T")[0],s=`${n}/api/human-predicts`,o=new URLSearchParams({"filters[day][$eq]":_,sort:"day:desc","pagination[limit]":"1",populate:"*"}),a=`${s}?${o.toString()}`,u=await $fetch(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}});u&&u.data&&u.data.length>0?this.prediction=u.data[0].attributes:this.prediction=null}catch(t){console.error("Failed to fetch prediction:",t),this.error=!0}finally{this.loading=!1}},formatDate(t){return t?new Date(t).toLocaleDateString(this.$i18n.locale,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},formatTimeUntilPrediction(){const t=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),n=t.getHours(),d=t.getMinutes(),_=t.getSeconds();if(n<20){const s=19-n,o=59-d,a=60-_;return this.$i18n.locale==="zh"?`${s}时${o}分${a}秒`:`${s}h ${o}m ${a}s`}return""},goToPredictionHistory(){const t=z();this.$router.push(t("/prediction-history"))}}},N={key:0,class:"flex items-center justify-center"},O={class:"flex items-center space-x-3"},E={class:"text-lg font-medium text-gray-600 dark:text-gray-300"},F={key:1,class:"flex items-center justify-between"},R={class:"flex items-center space-x-3"},Z={class:"text-lg font-medium text-red-600 dark:text-red-400"},G={key:2,class:"flex items-center justify-center"},K={class:"flex items-center justify-between w-full max-w-5xl"},J={class:"flex items-center space-x-3"},Q={class:"w-14 h-14 bg-primary/20 rounded-full flex items-center justify-center"},W={class:"text-xl font-bold text-gray-900 dark:text-white"},X={class:"text-base text-gray-500 dark:text-gray-400"},Y={class:"flex items-center"},ee={class:"bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border-2 border-amber-300 dark:border-amber-700 rounded-lg px-6 py-2 shadow-lg"},te={class:"text-center"},se={class:"text-xs font-medium text-amber-700 dark:text-amber-300 mb-1"},oe={class:"text-2xl font-black text-amber-900 dark:text-amber-100 font-mono tracking-wider"},re={key:3,class:"flex items-center justify-center"},ne={class:"flex items-center justify-between w-full max-w-6xl"},ie={class:"flex items-center space-x-4"},ae={class:"flex items-center space-x-3"},ce={class:"relative"},le={class:"text-base font-medium text-gray-600 dark:text-gray-300"},de={class:"flex items-center space-x-3 bg-blue-50 dark:bg-blue-950/50 border-2 border-blue-200 dark:border-blue-800 rounded-lg px-4 py-1 shadow-lg"},ue={class:"text-base font-bold text-blue-800 dark:text-blue-200"},me={class:"text-2xl font-black text-blue-900 dark:text-blue-100"},_e={class:"text-right"},pe={class:"flex items-center justify-end space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-1"},he={key:0,class:"flex space-x-1 justify-end"},fe={key:4,class:"flex items-center justify-center"},ge={class:"flex items-center justify-between w-full max-w-5xl"},xe={class:"flex items-center space-x-4"},be={class:"flex items-center space-x-3"},ye={class:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},ve={class:"text-xl font-bold text-gray-700 dark:text-gray-300"},ke={class:"text-base text-gray-500 dark:text-gray-400"},we={class:"flex items-center space-x-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-lg px-4 py-1 shadow-lg"},je={class:"text-base font-bold text-gray-600 dark:text-gray-300"},$e={class:"text-2xl font-black text-gray-900 dark:text-white"},Se={key:5,class:"flex items-center justify-center"},De={class:"flex items-center space-x-3"},Pe={class:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Te={class:"text-lg font-medium text-gray-600 dark:text-gray-300"};function Ue(t,n,d,_,s,o){const a=U,u=I,p=C,x=H;return c(),b(x,{class:"prediction-banner bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-950 border-2 border-blue-200/30 dark:border-blue-800/30"},{default:m(()=>[s.loading?(c(),l("div",N,[e("div",O,[i(a,{name:"i-heroicons-arrow-path",class:"h-5 w-5 text-primary animate-spin"}),e("span",E,r(t.$t("prediction_component.loading")),1)])])):s.error?(c(),l("div",F,[e("div",R,[i(a,{name:"i-heroicons-exclamation-triangle",class:"h-6 w-6 text-red-500"}),e("p",Z,r(t.$t("prediction_component.error")),1)]),i(u,{onClick:o.fetchPrediction,color:"primary",size:"sm",loading:s.loading},{leading:m(()=>[i(a,{name:"i-heroicons-arrow-path"})]),default:m(()=>[g(" "+r(t.$t("common.refresh")),1)]),_:1},8,["onClick","loading"])])):o.isPredictionTime?s.prediction&&o.shouldShowPrediction?(c(),l("div",re,[e("div",ne,[e("div",ie,[e("div",ae,[e("div",ce,[e("div",{class:h(["flex items-center justify-center w-14 h-14 rounded-full text-white shadow-lg",s.prediction.side==="long"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-red-400 to-red-600"])},[i(a,{name:s.prediction.side==="long"?"i-heroicons-arrow-trending-up":"i-heroicons-arrow-trending-down",class:"h-7 w-7"},null,8,["name"])],2),e("div",{class:h(["absolute inset-0 rounded-full animate-ping opacity-20",s.prediction.side==="long"?"bg-green-400":"bg-red-400"])},null,2)]),e("div",null,[i(p,{color:s.prediction.side==="long"?"green":"red",variant:"soft",size:"lg",class:"text-lg font-bold px-4 py-1 mb-1"},{default:m(()=>[g(r(s.prediction.side==="long"?t.$t("prediction_component.side_long"):t.$t("prediction_component.side_short")),1)]),_:1},8,["color"]),e("p",le,r(t.$t("prediction_component.current_prediction")),1)])]),e("div",de,[i(a,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-blue-600"}),e("span",ue,r(t.$t("prediction_component.market_score")),1),e("span",me,r(o.predictionData.market_score),1),i(p,{color:Math.abs(o.predictionData.market_score)>=.2?"green":"amber",variant:"soft",size:"sm",class:"font-bold text-sm px-2 py-1"},{default:m(()=>[g(r(Math.abs(o.predictionData.market_score)>=.2?"强势":"温和"),1)]),_:1},8,["color"])])]),e("div",_e,[e("div",pe,[i(a,{name:"i-heroicons-clock",class:"h-5 w-5"}),e("span",null,r(o.formatDate(s.prediction.day)),1)]),o.hasStopLoss?(c(),l("div",he,[s.prediction.long_stoploss?(c(),b(p,{key:0,color:"green",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:m(()=>[g(" 多头止损: "+r(s.prediction.long_stoploss),1)]),_:1})):f("",!0),s.prediction.short_stoploss?(c(),b(p,{key:1,color:"red",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:m(()=>[g(" 空头止损: "+r(s.prediction.short_stoploss),1)]),_:1})):f("",!0)])):f("",!0)])])])):s.prediction&&!o.shouldShowPrediction?(c(),l("div",fe,[e("div",ge,[e("div",xe,[e("div",be,[e("div",ye,[i(a,{name:"i-heroicons-minus-circle",class:"h-7 w-7 text-gray-400"})]),e("div",null,[e("h3",ve,r(t.$t("prediction_component.no_suggestion")),1),e("p",ke,r(t.$t("prediction_component.market_score_too_low")),1)])]),e("div",we,[i(a,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-gray-500"}),e("span",je,r(t.$t("prediction_component.market_score")),1),e("span",$e,r(o.predictionData.market_score),1)])]),n[0]||(n[0]=e("div",null,null,-1))])])):(c(),l("div",Se,[e("div",De,[e("div",Pe,[i(a,{name:"i-heroicons-document-magnifying-glass",class:"h-5 w-5 text-gray-400"})]),e("p",Te,r(t.$t("common.no_data")),1)])])):(c(),l("div",G,[e("div",K,[e("div",J,[e("div",Q,[i(a,{name:"i-heroicons-clock",class:"h-7 w-7 text-primary"})]),e("div",null,[e("h3",W,r(t.$t("prediction_component.no_prediction_yet")),1),e("p",X,r(t.$t("prediction_component.waiting_for_prediction")),1)])]),e("div",Y,[e("div",ee,[e("div",te,[e("p",se,r(t.$t("prediction_component.countdown_label")),1),e("div",oe,r(o.formatTimeUntilPrediction()),1)])])])])]))]),_:1})}const Ie=Object.assign(j(V,[["render",Ue],["__scopeId","data-v-4a8ec598"]]),{__name:"MarketOverview"}),Ce={};function ze(t,n){const d=L,_=Ie,s=M,o=q;return c(),l("div",null,[i(d),i(_),i(s,null,{default:m(()=>[y(t.$slots,"default")]),_:3}),i(o)])}const Me=j(Ce,[["render",ze]]);export{Me as default};
