import{D as K,E as O,F as Q,L as W,G as X,H as Y,J as Z,K as tt,e as et,j as st,C as at,M as ot,N as nt,O as rt,i as it}from"./CP5YUvCS.js";import{_ as ct,a as lt,b as _t}from"./CNW023iL.js";import{_ as ut}from"./Cpd5cWqe.js";import{ao as dt,W as g,a3 as m,D as a,Y as r,X as i,L as o,am as c,x as p,J as mt,an as pt,af as ft,Q as S,ag as u,ap as gt}from"./B_AaASQX.js";import"./C2bHYaEW.js";const ht={class:"text-(--ui-text-muted)"},vt={class:"flex flex-wrap items-center gap-3 mt-4"},xt={key:2,class:"grid gap-8 sm:grid-cols-2"},yt={key:0,class:"group"},kt={class:"min-w-0"},bt={class:"text-sm font-medium text-gray-900 truncate"},wt={class:"text-sm text-gray-500 line-clamp-2 mt-1"},Pt={key:1},$t={key:2,class:"group"},Ut={class:"min-w-0 text-right"},Ct={class:"text-sm font-medium text-gray-900 truncate"},Bt={class:"text-sm text-gray-500 line-clamp-2 mt-1"},It={__name:"[slug]",async setup(Dt){var b,w,P,$;let f,v;const{locale:h}=K(),z=O(),A=Q(),I=z.params.slug,{data:n}=([f,v]=dt(()=>Y(`posts-${h.value}`,()=>tt("posts").where("locale","=",h.value).all())),f=await f,v(),f),e=(b=n.value)==null?void 0:b.find(t=>t.path.includes(I));if(!e)throw W({statusCode:404,statusMessage:"Post not found",fatal:!0});const x=t=>{if(!t)return"#";const d=t.replace(/^\/(en|zh|zh-Hant)/,"");return h.value==="en"?d:A(d)},_=((w=n.value)==null?void 0:w.findIndex(t=>t.path===e.path))||0,s=[];if(_>0&&n.value&&n.value[_-1]){const t=n.value[_-1];s.push({...t,_path:x(t.path),title:t.title,description:t.description})}else s.push(null);if(_<(((P=n.value)==null?void 0:P.length)||0)-1&&n.value&&n.value[_+1]){const t=n.value[_+1];s.push({...t,_path:x(t.path),title:t.title,description:t.description})}else s.push(null);const y=e.title,k=e.description;return X({title:y,ogTitle:y,description:k,ogDescription:k}),($=e.image)!=null&&$.src,(t,d)=>{const V=at,E=st,H=et,M=ct,T=lt,F=nt,U=it,C=rt,J=ut,R=_t,j=ot,q=Z;return a(e)?(i(),g(q,{key:0},{default:r(()=>{var B,D,L,N;return[o(M,{title:a(e).title,description:a(e).description},{headline:r(()=>[o(V,S(a(e).badge,{variant:"subtle"}),null,16),d[0]||(d[0]=c("span",{class:"text-(--ui-text-muted)"},"Â·",-1)),c("time",ht,u(new Date(a(e).date).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"})),1)]),default:r(()=>[c("div",vt,[(i(!0),p(mt,null,pt(a(e).authors,(l,G)=>(i(),g(H,{key:G,to:l.to,color:"neutral",variant:"subtle",target:"_blank",size:"sm"},{default:r(()=>[o(E,S({ref_for:!0},l.avatar,{alt:"Author avatar",size:"2xs"}),null,16),ft(" "+u(l.name),1)]),_:2},1032,["to"]))),128))])]),_:1},8,["title","description"]),o(j,null,gt({default:r(()=>[o(J,null,{default:r(()=>[a(e)?(i(),g(T,{key:0,value:a(e)},null,8,["value"])):m("",!0),s.some(l=>l!==null)?(i(),g(F,{key:1})):m("",!0),s.some(l=>l!==null)?(i(),p("div",xt,[s[0]?(i(),p("div",yt,[o(C,{to:s[0]._path,class:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors"},{default:r(()=>[o(U,{name:"i-lucide-arrow-left",class:"w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-colors flex-shrink-0"}),c("div",kt,[c("div",bt,u(s[0].title),1),c("div",wt,u(s[0].description),1)])]),_:1},8,["to"])])):(i(),p("div",Pt)),s[1]?(i(),p("div",$t,[o(C,{to:s[1]._path,class:"flex items-center gap-3 p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors"},{default:r(()=>[c("div",Ut,[c("div",Ct,u(s[1].title),1),c("div",Bt,u(s[1].description),1)]),o(U,{name:"i-lucide-arrow-right",class:"w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-colors flex-shrink-0"})]),_:1},8,["to"])])):m("",!0)])):m("",!0)]),_:1})]),_:2},[(N=(L=(D=(B=a(e))==null?void 0:B.body)==null?void 0:D.toc)==null?void 0:L.links)!=null&&N.length?{name:"right",fn:r(()=>[o(R,{links:a(e).body.toc.links},null,8,["links"])]),key:"0"}:void 0]),1024)]}),_:1})):m("",!0)}}};export{It as default};
