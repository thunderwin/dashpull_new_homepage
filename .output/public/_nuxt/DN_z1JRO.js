import{z as B,q as K,A as se,W as E,X as b,Q as $,x as we,an as Ae,J as ke,$ as _e,d as _,Y as x,Z as I,a3 as re,D as a,C as q,L as ue,a0 as R,ad as N,aw as Be,u as xe,F as Ke,ax as Le}from"./B_AaASQX.js";import{av as $e,aw as Ie,a2 as Q,ax as Te,$ as Pe,V as Y,ay as Z,az as Se,a1 as Ve,X as de,ag as J,P as T,aA as Re,aB as He,an as ce,W as fe,aC as Oe}from"./wFmu7Jbp.js";import{f as De}from"./BX15VejN.js";function Me(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}function qe(s){return B(()=>{var t;return $e(s)?!!((t=Ie(s))!=null&&t.closest("form")):!0})}const ie=K({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(s){const t=s,{primitiveElement:o,currentElement:u}=Q(),r=B(()=>t.checked??t.value);return se(r,(l,c)=>{if(!u.value)return;const m=u.value,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(f&&l!==c){const h=new Event("input",{bubbles:!0}),A=new Event("change",{bubbles:!0});f.call(m,l),m.dispatchEvent(h),m.dispatchEvent(A)}}),(l,c)=>(b(),E(Te,$({ref_key:"primitiveElement",ref:o},{...t,...l.$attrs},{as:"input"}),null,16))}}),Ne=K({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(s){const t=s,o=B(()=>typeof t.value=="object"&&Array.isArray(t.value)&&t.value.length===0&&t.required),u=B(()=>typeof t.value=="string"||typeof t.value=="number"||typeof t.value=="boolean"?[{name:t.name,value:t.value}]:typeof t.value=="object"&&Array.isArray(t.value)?t.value.flatMap((r,l)=>typeof r=="object"?Object.entries(r).map(([c,m])=>({name:`[${t.name}][${l}][${c}]`,value:m})):{name:`[${t.name}][${l}]`,value:r}):t.value!==null&&typeof t.value=="object"&&!Array.isArray(t.value)?Object.entries(t.value).map(([r,l])=>({name:`[${t.name}][${r}]`,value:l})):[]);return(r,l)=>o.value?(b(),E(ie,$({key:r.name},{...t,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(b(!0),we(ke,{key:1},Ae(u.value,c=>(b(),E(ie,$({key:c.name,ref_for:!0},{...t,...r.$attrs},{name:c.name,value:c.value}),null,16,["name","value"]))),128))}});function je(s,t,o){return s===void 0?!1:Array.isArray(s)?s.some(u=>V(u,t,o)):V(s,t,o)}function V(s,t,o){return s===void 0||t===void 0?!1:typeof s=="string"?s===t:typeof o=="function"?o(s,t):typeof o=="string"?(s==null?void 0:s[o])===(t==null?void 0:t[o]):Pe(s,t)}const[ee,We]=Y("ListboxRoot"),Ze=K({__name:"ListboxRoot",props:{modelValue:{},defaultValue:{},multiple:{type:Boolean},orientation:{default:"vertical"},dir:{},disabled:{type:Boolean},selectionBehavior:{default:"toggle"},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(s,{expose:t,emit:o}){const u=s,r=o,{multiple:l,highlightOnHover:c,orientation:m,disabled:d,selectionBehavior:C,dir:f}=_e(u),{getItems:h}=Z({isProvider:!0}),{handleTypeaheadSearch:A}=Se(),{primitiveElement:H,currentElement:p}=Q(),k=Me(),O=Ve(f),ve=qe(p),D=_(),P=_(!1),j=_(!0),y=de(u,"modelValue",r,{defaultValue:u.defaultValue??(l.value?[]:void 0),passive:u.modelValue===void 0,deep:!0});function pe(e){if(P.value=!0,u.multiple){const n=Array.isArray(y.value)?[...y.value]:[],i=n.findIndex(v=>V(v,e,u.by));u.selectionBehavior==="toggle"?(i===-1?n.push(e):n.splice(i,1),y.value=n):(y.value=[e],D.value=e)}else u.selectionBehavior==="toggle"&&V(y.value,e,u.by)?y.value=void 0:y.value=e;setTimeout(()=>{P.value=!1},1)}const g=_(null),W=_(null),L=_(!1),G=_(!1),te=J(),U=J(),ae=J();function X(){return h().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function F(e,n=!0){if(!e)return;g.value=e,j.value&&g.value.focus(),n&&g.value.scrollIntoView({block:"nearest"});const i=h().find(v=>v.ref===e);r("highlight",i)}function me(e){if(L.value)ae.trigger(e);else{const n=h().find(i=>V(i.value,e,u.by));n&&(g.value=n.ref,F(n.ref))}}function he(e){g.value&&g.value.isConnected&&(e.preventDefault(),e.stopPropagation(),G.value||g.value.click())}function ye(e){if(j.value){if(P.value=!0,L.value)U.trigger(e);else{const n=e.altKey||e.ctrlKey||e.metaKey;if(n&&e.key==="a"&&l.value){const i=h(),v=i.map(w=>w.value);y.value=[...v],e.preventDefault(),F(i[i.length-1].ref)}else if(!n){const i=A(e.key,h());i&&F(i)}}setTimeout(()=>{P.value=!1},1)}}function ge(){G.value=!0}function be(){requestAnimationFrame(()=>{G.value=!1})}function oe(){q(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ne(e)})}function z(e){const n=g.value;n!=null&&n.isConnected&&(W.value=n),g.value=null,r("leave",e)}function Ee(e){var i,v;const n=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if((i=e.currentTarget)==null||i.dispatchEvent(n),r("entryFocus",n),!n.defaultPrevented)if(W.value)F(W.value);else{const w=(v=X())==null?void 0:v[0];F(w)}}function ne(e){const n=Re(e,m.value,O.value);if(!n)return;let i=X();if(g.value){if(n==="last")i.reverse();else if(n==="prev"||n==="next"){n==="prev"&&i.reverse();const v=i.indexOf(g.value);i=i.slice(v+1)}Ce(e,i[0])}if(i.length){const v=!g.value&&n==="prev"?i.length-1:0;F(i[v])}if(L.value)return U.trigger(e)}function Ce(e,n){var v;if(!(L.value||u.selectionBehavior!=="replace"||!l.value||!Array.isArray(y.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const w=h().filter(S=>S.ref.dataset.disabled!=="");let M=(v=w.find(S=>S.ref===n))==null?void 0:v.value;if(e.key===k.END?M=w[w.length-1].value:e.key===k.HOME&&(M=w[0].value),!M||!D.value)return;const Fe=De(w.map(S=>S.value),D.value,M);y.value=Fe}}async function le(e){if(await q(),L.value)te.trigger(e);else{const n=X(),i=n.find(v=>v.dataset.state==="checked");i?F(i):n.length&&F(n[0])}}return se(y,()=>{P.value||q(()=>{le()})},{immediate:!0,deep:!0}),t({highlightedElement:g,highlightItem:me,highlightFirstItem:oe,highlightSelected:le,getItems:h}),We({modelValue:y,onValueChange:pe,multiple:l,orientation:m,dir:O,disabled:d,highlightOnHover:c,highlightedElement:g,isVirtual:L,virtualFocusHook:te,virtualKeydownHook:U,virtualHighlightHook:ae,by:u.by,firstValue:D,selectionBehavior:C,focusable:j,onLeave:z,onEnter:Ee,changeHighlight:F,onKeydownEnter:he,onKeydownNavigation:ne,onKeydownTypeAhead:ye,onCompositionStart:ge,onCompositionEnd:be,highlightFirstItem:oe}),(e,n)=>(b(),E(a(T),{ref_key:"primitiveElement",ref:H,as:e.as,"as-child":e.asChild,dir:a(O),"data-disabled":a(d)?"":void 0,onPointerleave:z,onFocusout:n[0]||(n[0]=async i=>{const v=i.relatedTarget||i.target;await q(),g.value&&a(p)&&!a(p).contains(v)&&z(i)})},{default:x(()=>[I(e.$slots,"default",{modelValue:a(y)}),a(ve)&&e.name?(b(),E(a(Ne),{key:0,name:e.name,value:a(y),disabled:a(d),required:e.required},null,8,["name","value","disabled","required"])):re("",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),et=K({__name:"ListboxContent",props:{asChild:{type:Boolean},as:{}},setup(s){const{CollectionSlot:t}=Z(),o=ee(),u=He(!1,10);return(r,l)=>(b(),E(a(t),null,{default:x(()=>[ue(a(T),{role:"listbox",as:r.as,"as-child":r.asChild,tabindex:a(o).focusable.value?a(o).highlightedElement.value?"-1":"0":void 0,"aria-orientation":a(o).orientation.value,"aria-multiselectable":!!a(o).multiple.value,"data-orientation":a(o).orientation.value,onMousedown:l[0]||(l[0]=N(c=>u.value=!0,["left"])),onFocus:l[1]||(l[1]=c=>{a(u)||a(o).onEnter(c)}),onKeydown:[l[2]||(l[2]=R(N(c=>{a(o).focusable.value&&a(o).onKeydownNavigation(c)},["prevent"]),["down","up","left","right","home","end"])),R(a(o).onKeydownEnter,["enter"]),a(o).onKeydownTypeAhead]},{default:x(()=>[I(r.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),[tt,Ge]=Y("ListboxGroup"),at=K({__name:"ListboxGroup",props:{asChild:{type:Boolean},as:{}},setup(s){const t=s,o=ce(void 0,"reka-listbox-group");return Ge({id:o}),(u,r)=>(b(),E(a(T),$({role:"group"},t,{"aria-labelledby":a(o)}),{default:x(()=>[I(u.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),ot=K({__name:"ListboxFilter",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"input"}},emits:["update:modelValue"],setup(s,{emit:t}){const o=s,r=de(o,"modelValue",t,{defaultValue:"",passive:o.modelValue===void 0}),l=ee(),{primitiveElement:c,currentElement:m}=Q(),d=B(()=>o.disabled||l.disabled.value||!1),C=_();return Be(()=>{var f;return C.value=(f=l.highlightedElement.value)==null?void 0:f.id}),xe(()=>{l.focusable.value=!1,setTimeout(()=>{var f;o.autoFocus&&((f=m.value)==null||f.focus())},1)}),Ke(()=>{l.focusable.value=!0}),(f,h)=>(b(),E(a(T),{ref_key:"primitiveElement",ref:c,as:f.as,"as-child":f.asChild,value:a(r),disabled:d.value?"":void 0,"data-disabled":d.value?"":void 0,"aria-disabled":d.value??void 0,"aria-activedescendant":C.value,type:"text",onKeydown:[R(N(a(l).onKeydownNavigation,["prevent"]),["down","up","home","end"]),R(a(l).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=A=>{r.value=A.target.value,a(l).highlightFirstItem(A)}),onCompositionstart:a(l).onCompositionStart,onCompositionend:a(l).onCompositionEnd},{default:x(()=>[I(f.$slots,"default",{modelValue:a(r)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Ue="listbox.select",[Xe,ze]=Y("ListboxItem"),nt=K({__name:"ListboxItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"div"}},emits:["select"],setup(s,{emit:t}){const o=s,u=t,r=ce(void 0,"reka-listbox-item"),{CollectionItem:l}=Z(),{forwardRef:c,currentElement:m}=fe(),d=ee(),C=B(()=>m.value===d.highlightedElement.value),f=B(()=>je(d.modelValue.value,o.value,d.by)),h=B(()=>d.disabled.value||o.disabled);async function A(p){u("select",p),!(p!=null&&p.defaultPrevented)&&!h.value&&p&&(d.onValueChange(o.value),d.changeHighlight(m.value))}function H(p){const k={originalEvent:p,value:o.value};Oe(Ue,A,k)}return ze({isSelected:f}),(p,k)=>(b(),E(a(l),{value:p.value},{default:x(()=>[Le([C.value,f.value],()=>ue(a(T),$({id:a(r)},p.$attrs,{ref:a(c),role:"option",tabindex:a(d).focusable.value?C.value?"0":"-1":-1,"aria-selected":f.value,as:p.as,"as-child":p.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":C.value?"":void 0,"data-state":f.value?"checked":"unchecked",onClick:H,onKeydown:R(N(H,["prevent"]),["space"]),onPointermove:k[0]||(k[0]=O=>{a(d).highlightedElement.value!==a(m)&&(a(d).highlightOnHover.value?a(d).changeHighlight(a(m),!1):a(d).focusable.value||a(d).changeHighlight(a(m),!1))})}),{default:x(()=>[I(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),k,1)]),_:3},8,["value"]))}}),lt=K({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean},as:{default:"span"}},setup(s){const t=s;fe();const o=Xe();return(u,r)=>a(o).isSelected.value?(b(),E(a(T),$({key:0,"aria-hidden":"true"},t),{default:x(()=>[I(u.$slots,"default")]),_:3},16)):re("",!0)}});export{ot as _,et as a,at as b,nt as c,lt as d,Ze as e,Ne as f,ee as g,tt as i,qe as u};
