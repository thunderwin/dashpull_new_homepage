import{g as S,j as D,e as $,p as k,c as b,o as c,w as u,A as d,x as h,z as _,r as y,u as P,P as U,K as e,s as a,L as T,E as r,y as I,D as f,a7 as C,aa as z,bl as L,bZ as M,b_ as q,b$ as A}from"./DmBscp-k.js";import{_ as j}from"./DlAUqK2U.js";const B={slots:{root:"rounded-lg",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},H={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(t){const n=t,l=S(),m=D(),s=$(()=>{var o;return k({extend:k(B),...((o=m.ui)==null?void 0:o.card)||{}})({variant:n.variant})});return(o,i)=>{var g;return c(),b(P(U),{as:t.as,class:_(s.value.root({class:[(g=n.ui)==null?void 0:g.root,n.class]}))},{default:u(()=>{var p,x,v;return[l.header?(c(),d("div",{key:0,class:_(s.value.header({class:(p=n.ui)==null?void 0:p.header}))},[y(o.$slots,"header")],2)):h("",!0),l.default?(c(),d("div",{key:1,class:_(s.value.body({class:(x=n.ui)==null?void 0:x.body}))},[y(o.$slots,"default")],2)):h("",!0),l.footer?(c(),d("div",{key:2,class:_(s.value.footer({class:(v=n.ui)==null?void 0:v.footer}))},[y(o.$slots,"footer")],2)):h("",!0)]}),_:3},8,["as","class"])}}},w=window.setInterval,V={name:"PredictionComponent",data(){return{prediction:null,loading:!0,error:!1,currentTime:new Date,countdownInterval:null}},computed:{isPredictionTime(){const n=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})).getHours();return n>=20||n<8},predictionData(){return this.prediction?this.prediction:{market_score:0}},hasStopLoss(){return this.prediction&&(this.prediction.long_stoploss||this.prediction.short_stoploss)},shouldShowPrediction(){return!this.prediction||!this.predictionData.market_score?!1:Math.abs(this.predictionData.market_score)>=.15}},mounted(){this.fetchPrediction(),this.timeInterval=w(()=>{this.currentTime=new Date},6e4),this.countdownInterval=w(()=>{this.currentTime=new Date},1e3)},beforeUnmount(){this.timeInterval&&clearInterval(this.timeInterval),this.countdownInterval&&clearInterval(this.countdownInterval)},methods:{async fetchPrediction(){this.loading=!0,this.error=!1;try{const t=L(),n=new Date().toISOString().split("T")[0],m="https://api.dashpull.com/api/human-predicts",s=new URLSearchParams({"filters[day][$eq]":n,sort:"day:desc","pagination[limit]":"1",populate:"*"}),o=`${m}?${s.toString()}`,i=await $fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer d500bca2021bcb781b01959a2b5c7eca35104ead14e5a1c7a113e1b77030a9d798e3d0ea3be290c20050d000ac5d7c6cc021e57eda01e40b3c545e2d8da2b6c4b75ead96fa5e3ac2cae31ae76de74415371a7928094e271535d1ef786a1f2216e745df26d4aacf85021f5b86c9f2fe92644a9fa5a1f9d63699e43340409661ff"}});i&&i.data&&i.data.length>0?this.prediction=i.data[0].attributes:this.prediction=null}catch(t){console.error("Failed to fetch prediction:",t),this.error=!0}finally{this.loading=!1}},formatDate(t){return t?new Date(t).toLocaleDateString(this.$i18n.locale,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},formatTimeUntilPrediction(){const t=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),n=t.getHours(),l=t.getMinutes(),m=t.getSeconds();if(n<20){const s=19-n,o=59-l,i=60-m;return this.$i18n.locale==="zh"?`${s}时${o}分${i}秒`:`${s}h ${o}m ${i}s`}return""},goToPredictionHistory(){const t=z();this.$router.push(t("/prediction-history"))}}},N={key:0,class:"flex items-center justify-center py-2 px-3"},O={class:"flex items-center space-x-3"},E={class:"text-lg font-medium text-gray-600 dark:text-gray-300"},Z={key:1,class:"flex items-center justify-between py-2 px-3"},F={class:"flex items-center space-x-3"},R={class:"text-lg font-medium text-red-600 dark:text-red-400"},G={key:2,class:"flex items-center justify-center py-2 px-3"},K={class:"flex items-center justify-between w-full max-w-5xl"},J={class:"flex items-center space-x-3"},Q={class:"w-14 h-14 bg-primary/20 rounded-full flex items-center justify-center"},W={class:"text-xl font-bold text-gray-900 dark:text-white"},X={class:"text-base text-gray-500 dark:text-gray-400"},Y={class:"flex items-center"},ee={class:"bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border-2 border-amber-300 dark:border-amber-700 rounded-lg px-6 py-2 shadow-lg"},te={class:"text-center"},se={class:"text-xs font-medium text-amber-700 dark:text-amber-300 mb-1"},oe={class:"text-2xl font-black text-amber-900 dark:text-amber-100 font-mono tracking-wider"},re={key:3,class:"flex items-center justify-center py-2 px-3"},ne={class:"flex items-center justify-between w-full max-w-6xl"},ie={class:"flex items-center space-x-4"},ae={class:"flex items-center space-x-3"},ce={class:"relative"},de={class:"text-base font-medium text-gray-600 dark:text-gray-300"},le={class:"flex items-center space-x-3 bg-blue-50 dark:bg-blue-950/50 border-2 border-blue-200 dark:border-blue-800 rounded-lg px-4 py-1 shadow-lg"},ue={class:"text-base font-bold text-blue-800 dark:text-blue-200"},me={class:"text-2xl font-black text-blue-900 dark:text-blue-100"},pe={class:"text-right"},_e={class:"flex items-center justify-end space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-1"},he={key:0,class:"flex space-x-1 justify-end"},fe={key:4,class:"flex items-center justify-center py-2 px-3"},ge={class:"flex items-center justify-between w-full max-w-5xl"},xe={class:"flex items-center space-x-4"},be={class:"flex items-center space-x-3"},ye={class:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},ve={class:"text-xl font-bold text-gray-700 dark:text-gray-300"},ke={class:"text-base text-gray-500 dark:text-gray-400"},we={class:"flex items-center space-x-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-lg px-4 py-1 shadow-lg"},je={class:"text-base font-bold text-gray-600 dark:text-gray-300"},Se={class:"text-2xl font-black text-gray-900 dark:text-white"},De={key:5,class:"flex items-center justify-center py-2 px-3"},$e={class:"flex items-center space-x-3"},Pe={class:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Ue={class:"text-lg font-medium text-gray-600 dark:text-gray-300"};function Te(t,n,l,m,s,o){const i=T,g=I,p=C,x=H;return c(),b(x,{class:"prediction-banner bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-950 border-2 border-blue-200/30 dark:border-blue-800/30"},{default:u(()=>[s.loading?(c(),d("div",N,[e("div",O,[a(i,{name:"i-heroicons-arrow-path",class:"h-5 w-5 text-primary animate-spin"}),e("span",E,r(t.$t("prediction_component.loading")),1)])])):s.error?(c(),d("div",Z,[e("div",F,[a(i,{name:"i-heroicons-exclamation-triangle",class:"h-6 w-6 text-red-500"}),e("p",R,r(t.$t("prediction_component.error")),1)]),a(g,{onClick:o.fetchPrediction,color:"primary",size:"sm",loading:s.loading},{leading:u(()=>[a(i,{name:"i-heroicons-arrow-path"})]),default:u(()=>[f(" "+r(t.$t("common.refresh")),1)]),_:1},8,["onClick","loading"])])):o.isPredictionTime?s.prediction&&o.shouldShowPrediction?(c(),d("div",re,[e("div",ne,[e("div",ie,[e("div",ae,[e("div",ce,[e("div",{class:_(["flex items-center justify-center w-14 h-14 rounded-full text-white shadow-lg",s.prediction.side==="long"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-red-400 to-red-600"])},[a(i,{name:s.prediction.side==="long"?"i-heroicons-arrow-trending-up":"i-heroicons-arrow-trending-down",class:"h-7 w-7"},null,8,["name"])],2),e("div",{class:_(["absolute inset-0 rounded-full animate-ping opacity-20",s.prediction.side==="long"?"bg-green-400":"bg-red-400"])},null,2)]),e("div",null,[a(p,{color:s.prediction.side==="long"?"green":"red",variant:"soft",size:"lg",class:"text-lg font-bold px-4 py-1 mb-1"},{default:u(()=>[f(r(s.prediction.side==="long"?t.$t("prediction_component.side_long"):t.$t("prediction_component.side_short")),1)]),_:1},8,["color"]),e("p",de,r(t.$t("prediction_component.current_prediction")),1)])]),e("div",le,[a(i,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-blue-600"}),e("span",ue,r(t.$t("prediction_component.market_score")),1),e("span",me,r(o.predictionData.market_score),1),a(p,{color:Math.abs(o.predictionData.market_score)>=.2?"green":"amber",variant:"soft",size:"sm",class:"font-bold text-sm px-2 py-1"},{default:u(()=>[f(r(Math.abs(o.predictionData.market_score)>=.2?"强势":"温和"),1)]),_:1},8,["color"])])]),e("div",pe,[e("div",_e,[a(i,{name:"i-heroicons-clock",class:"h-5 w-5"}),e("span",null,r(o.formatDate(s.prediction.day)),1)]),o.hasStopLoss?(c(),d("div",he,[s.prediction.long_stoploss?(c(),b(p,{key:0,color:"green",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:u(()=>[f(" 多头止损: "+r(s.prediction.long_stoploss),1)]),_:1})):h("",!0),s.prediction.short_stoploss?(c(),b(p,{key:1,color:"red",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:u(()=>[f(" 空头止损: "+r(s.prediction.short_stoploss),1)]),_:1})):h("",!0)])):h("",!0)])])])):s.prediction&&!o.shouldShowPrediction?(c(),d("div",fe,[e("div",ge,[e("div",xe,[e("div",be,[e("div",ye,[a(i,{name:"i-heroicons-minus-circle",class:"h-7 w-7 text-gray-400"})]),e("div",null,[e("h3",ve,r(t.$t("prediction_component.no_suggestion")),1),e("p",ke,r(t.$t("prediction_component.market_score_too_low")),1)])]),e("div",we,[a(i,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-gray-500"}),e("span",je,r(t.$t("prediction_component.market_score")),1),e("span",Se,r(o.predictionData.market_score),1)])]),n[0]||(n[0]=e("div",null,null,-1))])])):(c(),d("div",De,[e("div",$e,[e("div",Pe,[a(i,{name:"i-heroicons-document-magnifying-glass",class:"h-5 w-5 text-gray-400"})]),e("p",Ue,r(t.$t("common.no_data")),1)])])):(c(),d("div",G,[e("div",K,[e("div",J,[e("div",Q,[a(i,{name:"i-heroicons-clock",class:"h-7 w-7 text-primary"})]),e("div",null,[e("h3",W,r(t.$t("prediction_component.no_prediction_yet")),1),e("p",X,r(t.$t("prediction_component.waiting_for_prediction")),1)])]),e("div",Y,[e("div",ee,[e("div",te,[e("p",se,r(t.$t("prediction_component.countdown_label")),1),e("div",oe,r(o.formatTimeUntilPrediction()),1)])])])])]))]),_:1})}const Ie=Object.assign(j(V,[["render",Te],["__scopeId","data-v-d7ae2901"]]),{__name:"MarketOverview"}),Ce={};function ze(t,n){const l=M,m=Ie,s=q,o=A;return c(),d("div",null,[a(l),a(m),a(s,null,{default:u(()=>[y(t.$slots,"default")]),_:3}),a(o)])}const qe=j(Ce,[["render",ze]]);export{qe as default};
