import{c as y,o as c,w as m,A as d,K as e,s as o,L as k,E as r,y as v,D as h,a7 as w,x as g,z as f,aa as D,bm as j,b_ as S,r as P,b$ as T,c0 as U}from"./CPdVo6z7.js";import{_ as $}from"./Dc3dYHDP.js";import{_ as u}from"./DlAUqK2U.js";const C=window.setInterval,z={name:"PredictionComponent",data(){return{prediction:null,loading:!0,error:!1,currentTime:new Date}},computed:{isPredictionTime(){const a=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})).getHours();return a>=20||a<8},predictionData(){return this.prediction?this.prediction:{market_score:0}},hasStopLoss(){return this.prediction&&(this.prediction.long_stoploss||this.prediction.short_stoploss)},shouldShowPrediction(){return!this.prediction||!this.predictionData.market_score?!1:Math.abs(this.predictionData.market_score)>=.15}},mounted(){this.fetchPrediction(),this.timeInterval=C(()=>{this.currentTime=new Date},6e4)},beforeUnmount(){this.timeInterval&&clearInterval(this.timeInterval)},methods:{async fetchPrediction(){this.loading=!0,this.error=!1;try{const t=j(),a=new Date().toISOString().split("T")[0],l="https://api.dashpull.com/api/human-predicts",s=new URLSearchParams({"filters[day][$eq]":a,sort:"day:desc","pagination[limit]":"1",populate:"*"}),i=`${l}?${s.toString()}`,n=await $fetch(i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer d500bca2021bcb781b01959a2b5c7eca35104ead14e5a1c7a113e1b77030a9d798e3d0ea3be290c20050d000ac5d7c6cc021e57eda01e40b3c545e2d8da2b6c4b75ead96fa5e3ac2cae31ae76de74415371a7928094e271535d1ef786a1f2216e745df26d4aacf85021f5b86c9f2fe92644a9fa5a1f9d63699e43340409661ff"}});n&&n.data&&n.data.length>0?this.prediction=n.data[0].attributes:this.prediction=null}catch(t){console.error("Failed to fetch prediction:",t),this.error=!0}finally{this.loading=!1}},formatDate(t){return t?new Date(t).toLocaleDateString(this.$i18n.locale,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},formatTimeUntilPrediction(){const t=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),a=t.getHours();if(a<20){const _=20-a,l=60-t.getMinutes();return this.$i18n.locale==="zh"?`距离预测发布还有 ${_} 小时 ${l} 分钟`:`${_} hours ${l} minutes until prediction`}return""},goToPredictionHistory(){const t=D();this.$router.push(t("/prediction-history"))}}},I={key:0,class:"flex items-center justify-center py-8"},L={class:"flex items-center space-x-4"},B={class:"text-xl font-semibold text-gray-600 dark:text-gray-300"},M={key:1,class:"text-center py-10"},A={class:"flex flex-col items-center space-y-6"},H={class:"space-y-4"},N={class:"text-xl font-semibold text-red-600 dark:text-red-400"},O={key:2,class:"text-center py-10"},V={class:"flex flex-col items-center space-y-6"},q={class:"relative"},E={class:"w-20 h-20 bg-primary/20 rounded-full flex items-center justify-center"},F={class:"absolute -top-1 -right-1 w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center"},R={class:"space-y-4"},Z={class:"text-2xl font-bold text-gray-900 dark:text-white"},G={key:3,class:"py-8"},K={class:"text-center mb-8"},J={class:"flex justify-center mb-6"},Q={class:"relative"},W={class:"mb-6"},X={class:"text-lg font-medium text-gray-600 dark:text-gray-300"},Y={class:"flex items-center justify-center bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 border-2 border-blue-200/60 dark:border-blue-800/60 rounded-xl px-8 py-5 text-center shadow-lg max-w-xl mx-auto mb-8"},ee={class:"text-xl font-bold text-blue-800 dark:text-blue-200 mr-6"},te={class:"flex items-end mr-4"},oe={class:"text-4xl font-black text-blue-900 dark:text-blue-100 leading-none"},se={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={key:0,class:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 border-2 border-green-200/60 dark:border-green-800/60 rounded-xl p-6 text-center shadow-lg"},ne={class:"flex items-center justify-center space-x-2 mb-3"},ie={class:"text-2xl font-black text-green-900 dark:text-green-100"},ae={key:1,class:"bg-gradient-to-r from-red-50 to-rose-50 dark:from-red-950/30 dark:to-rose-950/30 border-2 border-red-200/60 dark:border-red-800/60 rounded-xl p-6 text-center shadow-lg"},ce={class:"flex items-center justify-center space-x-2 mb-3"},de={class:"text-2xl font-black text-red-900 dark:text-red-100"},le={class:"text-center pt-6 border-t-2 border-gray-200 dark:border-gray-700"},me={class:"flex items-center justify-center space-x-3 text-base font-medium text-gray-500 dark:text-gray-400"},_e={key:4,class:"text-center py-10"},he={class:"max-w-lg mx-auto space-y-6"},pe={class:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto"},ge={class:"space-y-4"},fe={class:"text-2xl font-bold text-gray-700 dark:text-gray-300"},ue={class:"text-lg text-gray-500 dark:text-gray-400"},xe={class:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 shadow-lg"},be={class:"text-center"},ye={class:"flex items-center justify-center space-x-3 mb-3"},ke={class:"text-lg font-bold text-gray-600 dark:text-gray-300"},ve={class:"text-3xl font-black text-gray-900 dark:text-white"},we={key:5,class:"text-center py-10"},De={class:"flex flex-col items-center space-x-4"},je={class:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4"},Se={class:"text-xl font-semibold text-gray-600 dark:text-gray-300"};function Pe(t,a,_,l,s,i){const n=k,x=v,p=w,b=$;return c(),y(b,{class:"prediction-container"},{default:m(()=>[s.loading?(c(),d("div",I,[e("div",L,[o(n,{name:"i-heroicons-arrow-path",class:"h-8 w-8 text-primary animate-spin"}),e("span",B,r(t.$t("prediction_component.loading")),1)])])):s.error?(c(),d("div",M,[e("div",A,[o(n,{name:"i-heroicons-exclamation-triangle",class:"h-16 w-16 text-red-500"}),e("div",H,[e("p",N,r(t.$t("prediction_component.error")),1),o(x,{onClick:i.fetchPrediction,color:"primary",size:"lg",loading:s.loading},{leading:m(()=>[o(n,{name:"i-heroicons-arrow-path"})]),default:m(()=>[h(" "+r(t.$t("common.refresh")),1)]),_:1},8,["onClick","loading"])])])])):i.isPredictionTime?s.prediction&&i.shouldShowPrediction?(c(),d("div",G,[e("div",K,[e("div",J,[e("div",Q,[e("div",{class:f(["flex items-center justify-center w-28 h-28 rounded-full text-white shadow-xl transform transition-all duration-300 hover:scale-105",s.prediction.side==="long"?"bg-gradient-to-br from-green-400 to-green-600 shadow-green-500/40":"bg-gradient-to-br from-red-400 to-red-600 shadow-red-500/40"])},[o(n,{name:s.prediction.side==="long"?"i-heroicons-arrow-trending-up":"i-heroicons-arrow-trending-down",class:"h-12 w-12"},null,8,["name"])],2),e("div",{class:f(["absolute inset-0 rounded-full animate-ping opacity-30",s.prediction.side==="long"?"bg-green-400":"bg-red-400"])},null,2)])]),e("div",W,[o(p,{color:s.prediction.side==="long"?"green":"red",variant:"soft",size:"lg",class:"text-2xl font-bold px-8 py-4 mb-3"},{default:m(()=>[h(r(s.prediction.side==="long"?t.$t("prediction_component.side_long"):t.$t("prediction_component.side_short")),1)]),_:1},8,["color"]),e("p",X,r(t.$t("prediction_component.current_prediction")),1)])]),e("div",Y,[o(n,{name:"i-heroicons-chart-bar-square",class:"h-8 w-8 text-blue-600 mr-3"}),e("span",ee,r(t.$t("prediction_component.market_score")),1),e("div",te,[e("span",oe,r(i.predictionData.market_score),1)]),o(p,{color:Math.abs(i.predictionData.market_score)>=.2?"green":"amber",variant:"soft",size:"lg",class:"text-lg font-bold px-4 py-2"},{default:m(()=>[h(r(Math.abs(i.predictionData.market_score)>=.2?"强势":"温和"),1)]),_:1},8,["color"])]),i.hasStopLoss?(c(),d("div",se,[s.prediction.long_stoploss?(c(),d("div",re,[e("div",ne,[o(n,{name:"i-heroicons-shield-check",class:"h-6 w-6 text-green-600"}),a[0]||(a[0]=e("span",{class:"text-lg font-bold text-green-800 dark:text-green-200"}," 多头止损 ",-1))]),e("div",ie,r(s.prediction.long_stoploss),1)])):g("",!0),s.prediction.short_stoploss?(c(),d("div",ae,[e("div",ce,[o(n,{name:"i-heroicons-shield-exclamation",class:"h-6 w-6 text-red-600"}),a[1]||(a[1]=e("span",{class:"text-lg font-bold text-red-800 dark:text-red-200"}," 空头止损 ",-1))]),e("div",de,r(s.prediction.short_stoploss),1)])):g("",!0)])):g("",!0),e("div",le,[e("div",me,[o(n,{name:"i-heroicons-clock",class:"h-5 w-5"}),e("span",null,r(t.$t("common.last_updated"))+": "+r(i.formatDate(s.prediction.day)),1)])])])):s.prediction&&!i.shouldShowPrediction?(c(),d("div",_e,[e("div",he,[e("div",pe,[o(n,{name:"i-heroicons-minus-circle",class:"h-10 w-10 text-gray-400"})]),e("div",ge,[e("h3",fe,r(t.$t("prediction_component.no_suggestion")),1),e("p",ue,r(t.$t("prediction_component.market_score_too_low")),1),e("div",xe,[e("div",be,[e("div",ye,[o(n,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-gray-500"}),e("span",ke,r(t.$t("prediction_component.market_score")),1)]),e("div",ve,r(i.predictionData.market_score),1)])])])])])):(c(),d("div",we,[e("div",De,[e("div",je,[o(n,{name:"i-heroicons-document-magnifying-glass",class:"h-10 w-10 text-gray-400"})]),e("p",Se,r(t.$t("common.no_data")),1)])])):(c(),d("div",O,[e("div",V,[e("div",q,[e("div",E,[o(n,{name:"i-heroicons-clock",class:"h-10 w-10 text-primary"})]),e("div",F,[o(n,{name:"i-heroicons-bell",class:"h-3 w-3 text-white"})])]),e("div",R,[e("h3",Z,r(t.$t("prediction_component.no_prediction_yet")),1),o(p,{color:"amber",variant:"soft",size:"lg",class:"text-lg px-6 py-3 font-semibold"},{default:m(()=>[h(r(i.formatTimeUntilPrediction()),1)]),_:1})])])]))]),_:1})}const Te=Object.assign(u(z,[["render",Pe]]),{__name:"MarketOverview"}),Ue={};function $e(t,a){const _=S,l=Te,s=T,i=U;return c(),d("div",null,[o(_),o(l),o(s,null,{default:m(()=>[P(t.$slots,"default")]),_:3}),o(i)])}const Le=u(Ue,[["render",$e]]);export{Le as default};
