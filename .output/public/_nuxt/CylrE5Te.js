import{a as v,e as d,aC as A,aT as R,A as r,K as e,E as a,z as g,x as U,F as V,B as j,am as E,o,bn as L}from"./BKgRdRmC.js";const N={class:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8"},T={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},H={class:"text-center mb-8"},G={class:"text-4xl font-bold text-gray-900 dark:text-white mb-4"},I={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-8"},K={class:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center shadow-sm"},q={class:"text-2xl font-bold text-gray-900 dark:text-white"},J={class:"text-sm text-gray-600 dark:text-gray-300"},O={class:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center shadow-sm"},Q={class:"text-2xl font-bold text-blue-600"},W={class:"text-sm text-gray-600 dark:text-gray-300"},X={class:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center shadow-sm"},Y={class:"text-2xl font-bold text-orange-600"},Z={class:"text-sm text-gray-600 dark:text-gray-300"},tt={class:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center shadow-sm"},et={class:"text-2xl font-bold text-green-600"},st={class:"text-sm text-gray-600 dark:text-gray-300"},at={class:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center shadow-sm"},rt={class:"text-2xl font-bold text-red-600"},ot={class:"text-sm text-gray-600 dark:text-gray-300"},nt={class:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center shadow-sm"},dt={class:"text-2xl font-bold text-blue-600"},it={class:"text-sm text-gray-600 dark:text-gray-300"},lt={class:"bg-white dark:bg-gray-800 rounded-lg p-4 text-center shadow-sm"},ct={class:"text-sm text-gray-600 dark:text-gray-300"},gt={key:0,class:"flex items-center justify-center py-12"},xt={class:"ml-3 text-gray-600 dark:text-gray-300"},ht={key:1,class:"text-center py-12"},ut={class:"text-red-600 dark:text-red-400 mb-4"},pt={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden"},_t={class:"overflow-x-auto"},yt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},mt={class:"bg-gray-50 dark:bg-gray-700"},vt={class:"w-1/5 px-4 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ft={class:"w-1/5 px-4 py-4 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},bt={class:"w-1/5 px-4 py-4 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},kt={class:"w-1/5 px-4 py-4 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},wt={class:"w-1/5 px-4 py-4 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},$t={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ct={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Pt={class:"px-4 py-4 whitespace-nowrap text-center"},Mt={key:0,class:"text-gray-400 text-xs"},St={key:1,class:"text-orange-500 text-xs"},zt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-center"},Bt={class:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-center"},Dt={key:0,class:"text-gray-400"},Ft={key:1,class:"text-gray-400"},At={key:3,class:"text-gray-400"},Rt={class:"px-4 py-4 whitespace-nowrap text-center"},Ut={key:0,class:"text-gray-400 text-xs"},Vt={key:1,class:"text-orange-500 text-xs"},jt={key:3,class:"text-gray-400 text-xs"},Et={key:0,class:"text-center py-12"},Lt={class:"text-gray-600 dark:text-gray-300"},Ht={__name:"predictions",setup(Nt){const i=v([]),_=v(!0),y=v(!1),l=d(()=>i.value.filter(t=>Math.abs(t.market_score||0)>=.15&&(!t.event||t.event==="没有"))),$=d(()=>i.value.filter(t=>Math.abs(t.market_score||0)>=.15&&t.event&&t.event!=="没有").length),C=d(()=>l.value.length),P=d(()=>l.value.filter(t=>t.side==="long").length),M=d(()=>l.value.filter(t=>t.side==="short").length),S=d(()=>{const t=l.value.filter(s=>s.result&&s.result!==null);if(t.length===0)return 0;const n=t.filter(s=>s.result==="yes").length;return Math.round(n/t.length*100)}),x=d(()=>{const t=l.value.filter(s=>s.result&&s.result!==null&&s.profit_rate!==null&&s.profit_rate!==void 0);return t.length===0?null:t.reduce((s,c)=>s+parseFloat(c.profit_rate||0),0)/t.length}),f=async()=>{var t;_.value=!0,y.value=!1;try{const n=E(),c="https://api.dashpull.com/api/human-predicts";let m=[],h=1;const b=1e3;let u=!0;for(;u&&h<=2;){const B=new URLSearchParams({sort:"day:desc","pagination[page]":h.toString(),"pagination[pageSize]":b.toString(),populate:"*","filters[day][$gte]":"2025-02-27"}),D=`${c}?${B.toString()}`,p=await $fetch(D,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer d500bca2021bcb781b01959a2b5c7eca35104ead14e5a1c7a113e1b77030a9d798e3d0ea3be290c20050d000ac5d7c6cc021e57eda01e40b3c545e2d8da2b6c4b75ead96fa5e3ac2cae31ae76de74415371a7928094e271535d1ef786a1f2216e745df26d4aacf85021f5b86c9f2fe92644a9fa5a1f9d63699e43340409661ff"}});if(p&&p.data){const k=p.data.map(F=>F.attributes);m=m.concat(k);const w=(t=p.meta)==null?void 0:t.pagination;(w&&h>=w.pageCount||k.length<b)&&(u=!1)}else u=!1;h++}i.value=m}catch(n){console.error("Failed to fetch predictions:",n),y.value=!0}finally{_.value=!1}},z=t=>{if(!t)return"";const n=new Date(t),{$i18n:s}=L();return n.toLocaleDateString(s.locale,{year:"numeric",month:"short",day:"numeric"})};return A(()=>{f()}),R({title:"预测历史 - DashPull",meta:[{name:"description",content:"AI 预测历史记录，查看最近100次预测结果和统计数据"}]}),(t,n)=>(o(),r("div",N,[e("div",T,[e("div",H,[e("h1",G,a(t.$t("predictions.title")),1)]),e("div",I,[e("div",K,[e("div",q,a(i.value.length),1),e("div",J,a(t.$t("predictions.total_records")),1)]),e("div",O,[e("div",Q,a(C.value),1),e("div",W,a(t.$t("predictions.trading_count")),1)]),e("div",X,[e("div",Y,a($.value),1),e("div",Z,a(t.$t("predictions.event_predictions")),1)]),e("div",tt,[e("div",et,a(P.value),1),e("div",st,a(t.$t("predictions.long_predictions")),1)]),e("div",at,[e("div",rt,a(M.value),1),e("div",ot,a(t.$t("predictions.short_predictions")),1)]),e("div",nt,[e("div",dt,a(S.value)+"%",1),e("div",it,a(t.$t("predictions.win_rate")),1)]),e("div",lt,[e("div",{class:g(["text-2xl font-bold",x.value>=0?"text-green-600":"text-red-600"])},a(x.value!==null?(x.value>=0?"+":"")+x.value.toFixed(2)+"%":"-"),3),e("div",ct,a(t.$t("predictions.average_profit_rate")),1)])]),_.value?(o(),r("div",gt,[n[0]||(n[0]=e("div",{class:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"},null,-1)),e("span",xt,a(t.$t("prediction_component.loading")),1)])):y.value?(o(),r("div",ht,[e("p",ut,a(t.$t("prediction_component.error")),1),e("button",{onClick:f,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"},a(t.$t("common.refresh")),1)])):(o(),r("div",pt,[e("div",_t,[e("table",yt,[e("thead",mt,[e("tr",null,[e("th",vt,a(t.$t("predictions.date")),1),e("th",ft,a(t.$t("predictions.prediction")),1),e("th",bt,a(t.$t("predictions.long_short_score")),1),e("th",kt,a(t.$t("predictions.profit_rate")),1),e("th",wt,a(t.$t("predictions.result")),1)])]),e("tbody",$t,[(o(!0),r(V,null,j(i.value,(s,c)=>(o(),r("tr",{key:c,class:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[e("td",Ct,a(z(s.day)),1),e("td",Pt,[Math.abs(s.market_score||0)<.15?(o(),r("span",Mt,a(t.$t("predictions.no_direction")),1)):s.event&&s.event!=="没有"?(o(),r("span",St,a(s.event),1)):(o(),r("span",{key:2,class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.side==="long"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"])},a(s.side==="long"?t.$t("prediction_component.side_long"):t.$t("prediction_component.side_short")),3))]),e("td",zt,[e("span",{class:g((s.market_score||0)>0?"text-green-600":"text-red-600")},a(s.market_score||"-"),3)]),e("td",Bt,[Math.abs(s.market_score||0)<.15?(o(),r("span",Dt," - ")):s.event&&s.event!=="没有"?(o(),r("span",Ft," - ")):s.profit_rate!==null&&s.profit_rate!==void 0?(o(),r("span",{key:2,class:g(s.profit_rate>=0?"text-green-600":"text-red-600")},a((s.profit_rate>=0?"+":"")+s.profit_rate.toFixed(2))+"% ",3)):(o(),r("span",At," - "))]),e("td",Rt,[Math.abs(s.market_score||0)<.15?(o(),r("span",Ut,a(t.$t("predictions.break")),1)):s.event&&s.event!=="没有"?(o(),r("span",Vt,a(t.$t("predictions.event")),1)):s.result&&s.result!==null?(o(),r("span",{key:2,class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.result==="yes"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":s.result==="no"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"])},a(s.result==="yes"?"✓ "+t.$t("predictions.win"):s.result==="no"?"✗ "+t.$t("predictions.loss"):"⊕ "+t.$t("predictions.stop_loss")),3)):(o(),r("span",jt,a(t.$t("predictions.pending")),1))])]))),128))])])]),i.value.length===0?(o(),r("div",Et,[n[1]||(n[1]=e("div",{class:"text-gray-400 mb-2"},[e("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("p",Lt,a(t.$t("common.no_data")),1)])):U("",!0)]))])]))}};export{Ht as default};
