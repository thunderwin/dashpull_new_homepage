import{g as $,j as S,e as T,p as k,c as b,o as c,w as _,A as l,x as f,z as h,r as y,u as D,P,K as e,s as a,L as U,E as r,y as I,D as x,a7 as C,aa as A,am as z,b_ as B,b$ as L,c0 as q}from"./hN2R0xds.js";import{_ as j}from"./DlAUqK2U.js";const H={slots:{root:"rounded-lg",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},M={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(t){const n=t,d=$(),u=S(),s=T(()=>{var o;return k({extend:k(H),...((o=u.ui)==null?void 0:o.card)||{}})({variant:n.variant})});return(o,i)=>{var p;return c(),b(D(P),{as:t.as,class:h(s.value.root({class:[(p=n.ui)==null?void 0:p.root,n.class]}))},{default:_(()=>{var m,g,v;return[d.header?(c(),l("div",{key:0,class:h(s.value.header({class:(m=n.ui)==null?void 0:m.header}))},[y(o.$slots,"header")],2)):f("",!0),d.default?(c(),l("div",{key:1,class:h(s.value.body({class:(g=n.ui)==null?void 0:g.body}))},[y(o.$slots,"default")],2)):f("",!0),d.footer?(c(),l("div",{key:2,class:h(s.value.footer({class:(v=n.ui)==null?void 0:v.footer}))},[y(o.$slots,"footer")],2)):f("",!0)]}),_:3},8,["as","class"])}}},w=window.setInterval,V={name:"PredictionComponent",data(){return{prediction:null,loading:!0,error:!1,currentTime:new Date,countdownInterval:null}},computed:{isPredictionTime(){const n=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})).getHours();return n>=20||n<8},predictionData(){return this.prediction?this.prediction:{market_score:0}},hasStopLoss(){return this.prediction&&(this.prediction.long_stoploss||this.prediction.short_stoploss)},shouldShowPrediction(){return!this.prediction||!this.predictionData.market_score?!1:Math.abs(this.predictionData.market_score)>=.15}},mounted(){this.fetchPrediction(),this.timeInterval=w(()=>{this.currentTime=new Date},6e4),this.countdownInterval=w(()=>{this.currentTime=new Date},1e3)},beforeUnmount(){this.timeInterval&&clearInterval(this.timeInterval),this.countdownInterval&&clearInterval(this.countdownInterval)},methods:{async fetchPrediction(){this.loading=!0,this.error=!1;try{const t=z(),n=t.public.strapiApiUrl||"https://api.dashpull.com",d=t.public.strapiApiToken,u=new Date().toISOString().split("T")[0],s=`${n}/api/human-predicts-statistics`,o={"Content-Type":"application/json"};d&&(o.Authorization=`Bearer ${d}`);const i=await $fetch(s,{method:"GET",headers:o});if(i&&i.predictions&&i.predictions.length>0){const p=i.predictions.find(m=>m.day===u);this.prediction=p||null}else this.prediction=null}catch(t){console.error("Failed to fetch prediction:",t),this.error=!0}finally{this.loading=!1}},formatDate(t){return t?new Date(t).toLocaleDateString(this.$i18n.locale,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},formatTimeUntilPrediction(){const t=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),n=t.getHours(),d=t.getMinutes(),u=t.getSeconds();if(n<20){const s=19-n,o=59-d,i=60-u;return this.$i18n.locale==="zh"?`${s}时${o}分${i}秒`:`${s}h ${o}m ${i}s`}return""},goToPredictionHistory(){const t=A();this.$router.push(t("/prediction-history"))}}},N={key:0,class:"flex items-center justify-center"},O={class:"flex items-center space-x-3"},E={class:"text-lg font-medium text-gray-600 dark:text-gray-300"},F={key:1,class:"flex items-center justify-between"},Z={class:"flex items-center space-x-3"},G={class:"text-lg font-medium text-red-600 dark:text-red-400"},K={key:2,class:"flex items-center justify-center"},R={class:"flex items-center justify-between w-full max-w-5xl"},J={class:"flex items-center space-x-3"},Q={class:"w-14 h-14 bg-primary/20 rounded-full flex items-center justify-center"},W={class:"text-xl font-bold text-gray-900 dark:text-white"},X={class:"text-base text-gray-500 dark:text-gray-400"},Y={class:"flex items-center"},ee={class:"bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border-2 border-amber-300 dark:border-amber-700 rounded-lg px-6 py-2 shadow-lg"},te={class:"text-center"},se={class:"text-xs font-medium text-amber-700 dark:text-amber-300 mb-1"},oe={class:"text-2xl font-black text-amber-900 dark:text-amber-100 font-mono tracking-wider"},ne={key:3,class:"flex items-center justify-center"},ie={class:"flex items-center justify-between w-full max-w-6xl"},re={class:"flex items-center space-x-4"},ae={class:"flex items-center space-x-3"},ce={class:"relative"},de={class:"text-base font-medium text-gray-600 dark:text-gray-300"},le={class:"flex items-center space-x-3 bg-blue-50 dark:bg-blue-950/50 border-2 border-blue-200 dark:border-blue-800 rounded-lg px-4 py-1 shadow-lg"},ue={class:"text-base font-bold text-blue-800 dark:text-blue-200"},me={class:"text-2xl font-black text-blue-900 dark:text-blue-100"},_e={class:"text-right"},pe={class:"flex items-center justify-end space-x-2 text-sm text-gray-500 dark:text-gray-400 mb-1"},he={key:0,class:"flex space-x-1 justify-end"},fe={key:4,class:"flex items-center justify-center"},ge={class:"flex items-center justify-between w-full max-w-5xl"},xe={class:"flex items-center space-x-4"},be={class:"flex items-center space-x-3"},ye={class:"w-14 h-14 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},ve={class:"text-xl font-bold text-gray-700 dark:text-gray-300"},ke={class:"text-base text-gray-500 dark:text-gray-400"},we={class:"flex items-center space-x-3 bg-gray-50 dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-lg px-4 py-1 shadow-lg"},je={class:"text-base font-bold text-gray-600 dark:text-gray-300"},$e={class:"text-2xl font-black text-gray-900 dark:text-white"},Se={key:5,class:"flex items-center justify-center"},Te={class:"flex items-center space-x-3"},De={class:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center"},Pe={class:"text-lg font-medium text-gray-600 dark:text-gray-300"};function Ue(t,n,d,u,s,o){const i=U,p=I,m=C,g=M;return c(),b(g,{class:"prediction-banner bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-900 dark:to-blue-950 border-2 border-blue-200/30 dark:border-blue-800/30"},{default:_(()=>[s.loading?(c(),l("div",N,[e("div",O,[a(i,{name:"i-heroicons-arrow-path",class:"h-5 w-5 text-primary animate-spin"}),e("span",E,r(t.$t("prediction_component.loading")),1)])])):s.error?(c(),l("div",F,[e("div",Z,[a(i,{name:"i-heroicons-exclamation-triangle",class:"h-6 w-6 text-red-500"}),e("p",G,r(t.$t("prediction_component.error")),1)]),a(p,{onClick:o.fetchPrediction,color:"primary",size:"sm",loading:s.loading},{leading:_(()=>[a(i,{name:"i-heroicons-arrow-path"})]),default:_(()=>[x(" "+r(t.$t("common.refresh")),1)]),_:1},8,["onClick","loading"])])):o.isPredictionTime?s.prediction&&o.shouldShowPrediction?(c(),l("div",ne,[e("div",ie,[e("div",re,[e("div",ae,[e("div",ce,[e("div",{class:h(["flex items-center justify-center w-14 h-14 rounded-full text-white shadow-lg",s.prediction.side==="long"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-red-400 to-red-600"])},[a(i,{name:s.prediction.side==="long"?"i-heroicons-arrow-trending-up":"i-heroicons-arrow-trending-down",class:"h-7 w-7"},null,8,["name"])],2),e("div",{class:h(["absolute inset-0 rounded-full animate-ping opacity-20",s.prediction.side==="long"?"bg-green-400":"bg-red-400"])},null,2)]),e("div",null,[a(m,{color:s.prediction.side==="long"?"green":"red",variant:"soft",size:"lg",class:"text-lg font-bold px-4 py-1 mb-1"},{default:_(()=>[x(r(s.prediction.side==="long"?t.$t("prediction_component.side_long"):t.$t("prediction_component.side_short")),1)]),_:1},8,["color"]),e("p",de,r(t.$t("prediction_component.current_prediction")),1)])]),e("div",le,[a(i,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-blue-600"}),e("span",ue,r(t.$t("prediction_component.market_score")),1),e("span",me,r(o.predictionData.market_score),1)])]),e("div",_e,[e("div",pe,[a(i,{name:"i-heroicons-clock",class:"h-5 w-5"}),e("span",null,r(o.formatDate(s.prediction.day)),1)]),o.hasStopLoss?(c(),l("div",he,[s.prediction.long_stoploss?(c(),b(m,{key:0,color:"green",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:_(()=>[x(" 多头止损: "+r(s.prediction.long_stoploss),1)]),_:1})):f("",!0),s.prediction.short_stoploss?(c(),b(m,{key:1,color:"red",variant:"outline",size:"sm",class:"px-2 py-1 text-xs"},{default:_(()=>[x(" 空头止损: "+r(s.prediction.short_stoploss),1)]),_:1})):f("",!0)])):f("",!0)])])])):s.prediction&&!o.shouldShowPrediction?(c(),l("div",fe,[e("div",ge,[e("div",xe,[e("div",be,[e("div",ye,[a(i,{name:"i-heroicons-minus-circle",class:"h-7 w-7 text-gray-400"})]),e("div",null,[e("h3",ve,r(t.$t("prediction_component.no_suggestion")),1),e("p",ke,r(t.$t("prediction_component.market_score_too_low")),1)])]),e("div",we,[a(i,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-gray-500"}),e("span",je,r(t.$t("prediction_component.market_score")),1),e("span",$e,r(o.predictionData.market_score),1)])]),n[0]||(n[0]=e("div",null,null,-1))])])):(c(),l("div",Se,[e("div",Te,[e("div",De,[a(i,{name:"i-heroicons-document-magnifying-glass",class:"h-5 w-5 text-gray-400"})]),e("p",Pe,r(t.$t("common.no_data")),1)])])):(c(),l("div",K,[e("div",R,[e("div",J,[e("div",Q,[a(i,{name:"i-heroicons-clock",class:"h-7 w-7 text-primary"})]),e("div",null,[e("h3",W,r(t.$t("prediction_component.no_prediction_yet")),1),e("p",X,r(t.$t("prediction_component.waiting_for_prediction")),1)])]),e("div",Y,[e("div",ee,[e("div",te,[e("p",se,r(t.$t("prediction_component.countdown_label")),1),e("div",oe,r(o.formatTimeUntilPrediction()),1)])])])])]))]),_:1})}const Ie=Object.assign(j(V,[["render",Ue],["__scopeId","data-v-4e3c6f44"]]),{__name:"MarketOverview"}),Ce={};function Ae(t,n){const d=B,u=Ie,s=L,o=q;return c(),l("div",null,[a(d),a(u),a(s,null,{default:_(()=>[y(t.$slots,"default")]),_:3}),a(o)])}const Le=j(Ce,[["render",Ae]]);export{Le as default};
