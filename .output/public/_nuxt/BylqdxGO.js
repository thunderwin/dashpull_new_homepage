import{g as j,j as D,e as P,p as v,c as k,o as c,w as h,A as d,x as p,z as _,r as b,u as S,P as U,K as e,s as n,L as T,E as a,y as $,D as x,a7 as C,aa as z,bm as I,b_ as L,b$ as q,c0 as A}from"./DAauPEKE.js";import{_ as w}from"./DlAUqK2U.js";const B={slots:{root:"rounded-lg",header:"p-4 sm:px-6",body:"p-4 sm:p-6",footer:"p-4 sm:px-6"},variants:{variant:{solid:{root:"bg-inverted text-inverted"},outline:{root:"bg-default ring ring-default divide-y divide-default"},soft:{root:"bg-elevated/50 divide-y divide-default"},subtle:{root:"bg-elevated/50 ring ring-default divide-y divide-default"}}},defaultVariants:{variant:"outline"}},M={__name:"UCard",props:{as:{type:null,required:!1},variant:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(t){const r=t,l=j(),m=D(),s=P(()=>{var o;return v({extend:v(B),...((o=m.ui)==null?void 0:o.card)||{}})({variant:r.variant})});return(o,i)=>{var f;return c(),k(S(U),{as:t.as,class:_(s.value.root({class:[(f=r.ui)==null?void 0:f.root,r.class]}))},{default:h(()=>{var u,g,y;return[l.header?(c(),d("div",{key:0,class:_(s.value.header({class:(u=r.ui)==null?void 0:u.header}))},[b(o.$slots,"header")],2)):p("",!0),l.default?(c(),d("div",{key:1,class:_(s.value.body({class:(g=r.ui)==null?void 0:g.body}))},[b(o.$slots,"default")],2)):p("",!0),l.footer?(c(),d("div",{key:2,class:_(s.value.footer({class:(y=r.ui)==null?void 0:y.footer}))},[b(o.$slots,"footer")],2)):p("",!0)]}),_:3},8,["as","class"])}}},H=window.setInterval,V={name:"PredictionComponent",data(){return{prediction:null,loading:!0,error:!1,currentTime:new Date}},computed:{isPredictionTime(){const r=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})).getHours();return r>=20||r<8},predictionData(){return this.prediction?this.prediction:{market_score:0}},hasStopLoss(){return this.prediction&&(this.prediction.long_stoploss||this.prediction.short_stoploss)},shouldShowPrediction(){return!this.prediction||!this.predictionData.market_score?!1:Math.abs(this.predictionData.market_score)>=.15}},mounted(){this.fetchPrediction(),this.timeInterval=H(()=>{this.currentTime=new Date},6e4)},beforeUnmount(){this.timeInterval&&clearInterval(this.timeInterval)},methods:{async fetchPrediction(){this.loading=!0,this.error=!1;try{const t=I(),r=new Date().toISOString().split("T")[0],m="https://api.dashpull.com/api/human-predicts",s=new URLSearchParams({"filters[day][$eq]":r,sort:"day:desc","pagination[limit]":"1",populate:"*"}),o=`${m}?${s.toString()}`,i=await $fetch(o,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer d500bca2021bcb781b01959a2b5c7eca35104ead14e5a1c7a113e1b77030a9d798e3d0ea3be290c20050d000ac5d7c6cc021e57eda01e40b3c545e2d8da2b6c4b75ead96fa5e3ac2cae31ae76de74415371a7928094e271535d1ef786a1f2216e745df26d4aacf85021f5b86c9f2fe92644a9fa5a1f9d63699e43340409661ff"}});i&&i.data&&i.data.length>0?this.prediction=i.data[0].attributes:this.prediction=null}catch(t){console.error("Failed to fetch prediction:",t),this.error=!0}finally{this.loading=!1}},formatDate(t){return t?new Date(t).toLocaleDateString(this.$i18n.locale,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""},formatTimeUntilPrediction(){const t=new Date(this.currentTime.toLocaleString("en-US",{timeZone:"Asia/Shanghai"})),r=t.getHours();if(r<20){const l=20-r,m=60-t.getMinutes();return this.$i18n.locale==="zh"?`距离预测发布还有 ${l} 小时 ${m} 分钟`:`${l} hours ${m} minutes until prediction`}return""},goToPredictionHistory(){const t=z();this.$router.push(t("/prediction-history"))}}},N={key:0,class:"flex items-center justify-center py-8"},O={class:"flex items-center space-x-4"},E={class:"text-xl font-semibold text-gray-600 dark:text-gray-300"},F={key:1,class:"text-center py-10"},R={class:"flex flex-col items-center space-y-6"},Z={class:"space-y-4"},G={class:"text-xl font-semibold text-red-600 dark:text-red-400"},K={key:2,class:"text-center py-10"},J={class:"flex flex-col items-center space-y-6"},Q={class:"relative"},W={class:"w-20 h-20 bg-primary/20 rounded-full flex items-center justify-center"},X={class:"absolute -top-1 -right-1 w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center"},Y={class:"space-y-4"},ee={class:"text-2xl font-bold text-gray-900 dark:text-white"},te={key:3,class:"py-8"},se={class:"text-center mb-8"},oe={class:"flex justify-center mb-6"},re={class:"relative"},ne={class:"mb-6"},ie={class:"text-lg font-medium text-gray-600 dark:text-gray-300"},ae={class:"flex items-center justify-center bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/30 dark:to-indigo-950/30 border-2 border-blue-200/60 dark:border-blue-800/60 rounded-xl px-8 py-5 text-center shadow-lg max-w-xl mx-auto mb-8"},ce={class:"text-xl font-bold text-blue-800 dark:text-blue-200 mr-6"},de={class:"flex items-end mr-4"},le={class:"text-4xl font-black text-blue-900 dark:text-blue-100 leading-none"},me={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},he={key:0,class:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30 border-2 border-green-200/60 dark:border-green-800/60 rounded-xl p-6 text-center shadow-lg"},ue={class:"flex items-center justify-center space-x-2 mb-3"},_e={class:"text-2xl font-black text-green-900 dark:text-green-100"},pe={key:1,class:"bg-gradient-to-r from-red-50 to-rose-50 dark:from-red-950/30 dark:to-rose-950/30 border-2 border-red-200/60 dark:border-red-800/60 rounded-xl p-6 text-center shadow-lg"},fe={class:"flex items-center justify-center space-x-2 mb-3"},ge={class:"text-2xl font-black text-red-900 dark:text-red-100"},xe={class:"text-center pt-6 border-t-2 border-gray-200 dark:border-gray-700"},be={class:"flex items-center justify-center space-x-3 text-base font-medium text-gray-500 dark:text-gray-400"},ye={key:4,class:"text-center py-10"},ve={class:"max-w-lg mx-auto space-y-6"},ke={class:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto"},we={class:"space-y-4"},je={class:"text-2xl font-bold text-gray-700 dark:text-gray-300"},De={class:"text-lg text-gray-500 dark:text-gray-400"},Pe={class:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 shadow-lg"},Se={class:"text-center"},Ue={class:"flex items-center justify-center space-x-3 mb-3"},Te={class:"text-lg font-bold text-gray-600 dark:text-gray-300"},$e={class:"text-3xl font-black text-gray-900 dark:text-white"},Ce={key:5,class:"text-center py-10"},ze={class:"flex flex-col items-center space-x-4"},Ie={class:"w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4"},Le={class:"text-xl font-semibold text-gray-600 dark:text-gray-300"};function qe(t,r,l,m,s,o){const i=T,f=$,u=C,g=M;return c(),k(g,{class:"prediction-container"},{default:h(()=>[s.loading?(c(),d("div",N,[e("div",O,[n(i,{name:"i-heroicons-arrow-path",class:"h-8 w-8 text-primary animate-spin"}),e("span",E,a(t.$t("prediction_component.loading")),1)])])):s.error?(c(),d("div",F,[e("div",R,[n(i,{name:"i-heroicons-exclamation-triangle",class:"h-16 w-16 text-red-500"}),e("div",Z,[e("p",G,a(t.$t("prediction_component.error")),1),n(f,{onClick:o.fetchPrediction,color:"primary",size:"lg",loading:s.loading},{leading:h(()=>[n(i,{name:"i-heroicons-arrow-path"})]),default:h(()=>[x(" "+a(t.$t("common.refresh")),1)]),_:1},8,["onClick","loading"])])])])):o.isPredictionTime?s.prediction&&o.shouldShowPrediction?(c(),d("div",te,[e("div",se,[e("div",oe,[e("div",re,[e("div",{class:_(["flex items-center justify-center w-28 h-28 rounded-full text-white shadow-xl transform transition-all duration-300 hover:scale-105",s.prediction.side==="long"?"bg-gradient-to-br from-green-400 to-green-600 shadow-green-500/40":"bg-gradient-to-br from-red-400 to-red-600 shadow-red-500/40"])},[n(i,{name:s.prediction.side==="long"?"i-heroicons-arrow-trending-up":"i-heroicons-arrow-trending-down",class:"h-12 w-12"},null,8,["name"])],2),e("div",{class:_(["absolute inset-0 rounded-full animate-ping opacity-30",s.prediction.side==="long"?"bg-green-400":"bg-red-400"])},null,2)])]),e("div",ne,[n(u,{color:s.prediction.side==="long"?"green":"red",variant:"soft",size:"lg",class:"text-2xl font-bold px-8 py-4 mb-3"},{default:h(()=>[x(a(s.prediction.side==="long"?t.$t("prediction_component.side_long"):t.$t("prediction_component.side_short")),1)]),_:1},8,["color"]),e("p",ie,a(t.$t("prediction_component.current_prediction")),1)])]),e("div",ae,[n(i,{name:"i-heroicons-chart-bar-square",class:"h-8 w-8 text-blue-600 mr-3"}),e("span",ce,a(t.$t("prediction_component.market_score")),1),e("div",de,[e("span",le,a(o.predictionData.market_score),1)]),n(u,{color:Math.abs(o.predictionData.market_score)>=.2?"green":"amber",variant:"soft",size:"lg",class:"text-lg font-bold px-4 py-2"},{default:h(()=>[x(a(Math.abs(o.predictionData.market_score)>=.2?"强势":"温和"),1)]),_:1},8,["color"])]),o.hasStopLoss?(c(),d("div",me,[s.prediction.long_stoploss?(c(),d("div",he,[e("div",ue,[n(i,{name:"i-heroicons-shield-check",class:"h-6 w-6 text-green-600"}),r[0]||(r[0]=e("span",{class:"text-lg font-bold text-green-800 dark:text-green-200"}," 多头止损 ",-1))]),e("div",_e,a(s.prediction.long_stoploss),1)])):p("",!0),s.prediction.short_stoploss?(c(),d("div",pe,[e("div",fe,[n(i,{name:"i-heroicons-shield-exclamation",class:"h-6 w-6 text-red-600"}),r[1]||(r[1]=e("span",{class:"text-lg font-bold text-red-800 dark:text-red-200"}," 空头止损 ",-1))]),e("div",ge,a(s.prediction.short_stoploss),1)])):p("",!0)])):p("",!0),e("div",xe,[e("div",be,[n(i,{name:"i-heroicons-clock",class:"h-5 w-5"}),e("span",null,a(t.$t("common.last_updated"))+": "+a(o.formatDate(s.prediction.day)),1)])])])):s.prediction&&!o.shouldShowPrediction?(c(),d("div",ye,[e("div",ve,[e("div",ke,[n(i,{name:"i-heroicons-minus-circle",class:"h-10 w-10 text-gray-400"})]),e("div",we,[e("h3",je,a(t.$t("prediction_component.no_suggestion")),1),e("p",De,a(t.$t("prediction_component.market_score_too_low")),1),e("div",Pe,[e("div",Se,[e("div",Ue,[n(i,{name:"i-heroicons-chart-bar-square",class:"h-6 w-6 text-gray-500"}),e("span",Te,a(t.$t("prediction_component.market_score")),1)]),e("div",$e,a(o.predictionData.market_score),1)])])])])])):(c(),d("div",Ce,[e("div",ze,[e("div",Ie,[n(i,{name:"i-heroicons-document-magnifying-glass",class:"h-10 w-10 text-gray-400"})]),e("p",Le,a(t.$t("common.no_data")),1)])])):(c(),d("div",K,[e("div",J,[e("div",Q,[e("div",W,[n(i,{name:"i-heroicons-clock",class:"h-10 w-10 text-primary"})]),e("div",X,[n(i,{name:"i-heroicons-bell",class:"h-3 w-3 text-white"})])]),e("div",Y,[e("h3",ee,a(t.$t("prediction_component.no_prediction_yet")),1),n(u,{color:"amber",variant:"soft",size:"lg",class:"text-lg px-6 py-3 font-semibold"},{default:h(()=>[x(a(o.formatTimeUntilPrediction()),1)]),_:1})])])]))]),_:1})}const Ae=Object.assign(w(V,[["render",qe]]),{__name:"MarketOverview"}),Be={};function Me(t,r){const l=L,m=Ae,s=q,o=A;return c(),d("div",null,[n(l),n(m),n(s,null,{default:h(()=>[b(t.$slots,"default")]),_:3}),n(o)])}const Ne=w(Be,[["render",Me]]);export{Ne as default};
